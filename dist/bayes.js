!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.bayesjs=t():e.bayesjs=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";n.r(t),n.d(t,"F",(function(){return r})),n.d(t,"T",(function(){return i})),n.d(t,"__",(function(){return o})),n.d(t,"add",(function(){return c})),n.d(t,"addIndex",(function(){return p})),n.d(t,"adjust",(function(){return v})),n.d(t,"all",(function(){return E})),n.d(t,"allPass",(function(){return Q})),n.d(t,"always",(function(){return ee})),n.d(t,"and",(function(){return te})),n.d(t,"any",(function(){return re})),n.d(t,"anyPass",(function(){return ie})),n.d(t,"ap",(function(){return oe})),n.d(t,"aperture",(function(){return ae})),n.d(t,"append",(function(){return ce})),n.d(t,"apply",(function(){return le})),n.d(t,"applySpec",(function(){return he})),n.d(t,"applyTo",(function(){return pe})),n.d(t,"ascend",(function(){return me})),n.d(t,"assoc",(function(){return ve})),n.d(t,"assocPath",(function(){return ye})),n.d(t,"binary",(function(){return _e})),n.d(t,"bind",(function(){return S})),n.d(t,"both",(function(){return Oe})),n.d(t,"call",(function(){return Pe})),n.d(t,"chain",(function(){return Ce})),n.d(t,"clamp",(function(){return Se})),n.d(t,"clone",(function(){return qe})),n.d(t,"comparator",(function(){return Le})),n.d(t,"complement",(function(){return Fe})),n.d(t,"compose",(function(){return He})),n.d(t,"composeK",(function(){return Ue})),n.d(t,"composeP",(function(){return Je})),n.d(t,"composeWith",(function(){return Qe})),n.d(t,"concat",(function(){return bt})),n.d(t,"cond",(function(){return _t})),n.d(t,"construct",(function(){return Nt})),n.d(t,"constructN",(function(){return wt})),n.d(t,"contains",(function(){return Et})),n.d(t,"converge",(function(){return Ot})),n.d(t,"countBy",(function(){return xt})),n.d(t,"curry",(function(){return je})),n.d(t,"curryN",(function(){return h})),n.d(t,"dec",(function(){return It})),n.d(t,"defaultTo",(function(){return Ct})),n.d(t,"descend",(function(){return St})),n.d(t,"difference",(function(){return kt})),n.d(t,"differenceWith",(function(){return qt})),n.d(t,"dissoc",(function(){return Lt})),n.d(t,"dissocPath",(function(){return $t})),n.d(t,"divide",(function(){return Vt})),n.d(t,"drop",(function(){return Rt})),n.d(t,"dropLast",(function(){return Wt})),n.d(t,"dropLastWhile",(function(){return Kt})),n.d(t,"dropRepeats",(function(){return en})),n.d(t,"dropRepeatsWith",(function(){return Qt})),n.d(t,"dropWhile",(function(){return nn})),n.d(t,"either",(function(){return on})),n.d(t,"empty",(function(){return un})),n.d(t,"endsWith",(function(){return an})),n.d(t,"eqBy",(function(){return cn})),n.d(t,"eqProps",(function(){return ln})),n.d(t,"equals",(function(){return ot})),n.d(t,"evolve",(function(){return fn})),n.d(t,"filter",(function(){return mt})),n.d(t,"find",(function(){return hn})),n.d(t,"findIndex",(function(){return mn})),n.d(t,"findLast",(function(){return gn})),n.d(t,"findLastIndex",(function(){return bn})),n.d(t,"flatten",(function(){return _n})),n.d(t,"flip",(function(){return wn})),n.d(t,"forEach",(function(){return Nn})),n.d(t,"forEachObjIndexed",(function(){return En})),n.d(t,"fromPairs",(function(){return On})),n.d(t,"groupBy",(function(){return jn})),n.d(t,"groupWith",(function(){return Pn})),n.d(t,"gt",(function(){return xn})),n.d(t,"gte",(function(){return In})),n.d(t,"has",(function(){return Sn})),n.d(t,"hasIn",(function(){return Tn})),n.d(t,"hasPath",(function(){return Cn})),n.d(t,"head",(function(){return Ke})),n.d(t,"identical",(function(){return An})),n.d(t,"identity",(function(){return Xe})),n.d(t,"ifElse",(function(){return kn})),n.d(t,"inc",(function(){return qn})),n.d(t,"includes",(function(){return Ln})),n.d(t,"indexBy",(function(){return Mn})),n.d(t,"indexOf",(function(){return Fn})),n.d(t,"init",(function(){return $n})),n.d(t,"innerJoin",(function(){return Vn})),n.d(t,"insert",(function(){return zn})),n.d(t,"insertAll",(function(){return Rn})),n.d(t,"intersection",(function(){return Hn})),n.d(t,"intersperse",(function(){return Un})),n.d(t,"into",(function(){return Xn})),n.d(t,"invert",(function(){return Zn})),n.d(t,"invertObj",(function(){return Qn})),n.d(t,"invoker",(function(){return er})),n.d(t,"is",(function(){return tr})),n.d(t,"isEmpty",(function(){return nr})),n.d(t,"isNil",(function(){return ge})),n.d(t,"join",(function(){return rr})),n.d(t,"juxt",(function(){return ir})),n.d(t,"keys",(function(){return H})),n.d(t,"keysIn",(function(){return or})),n.d(t,"last",(function(){return Zt})),n.d(t,"lastIndexOf",(function(){return ur})),n.d(t,"length",(function(){return ar})),n.d(t,"lens",(function(){return cr})),n.d(t,"lensIndex",(function(){return lr})),n.d(t,"lensPath",(function(){return fr})),n.d(t,"lensProp",(function(){return dr})),n.d(t,"lift",(function(){return Ee})),n.d(t,"liftN",(function(){return Ne})),n.d(t,"lt",(function(){return hr})),n.d(t,"lte",(function(){return pr})),n.d(t,"map",(function(){return U})),n.d(t,"mapAccum",(function(){return mr})),n.d(t,"mapAccumRight",(function(){return vr})),n.d(t,"mapObjIndexed",(function(){return gr})),n.d(t,"match",(function(){return yr})),n.d(t,"mathMod",(function(){return br})),n.d(t,"max",(function(){return O})),n.d(t,"maxBy",(function(){return _r})),n.d(t,"mean",(function(){return Nr})),n.d(t,"median",(function(){return Er})),n.d(t,"memoizeWith",(function(){return Or})),n.d(t,"merge",(function(){return jr})),n.d(t,"mergeAll",(function(){return Pr})),n.d(t,"mergeDeepLeft",(function(){return Cr})),n.d(t,"mergeDeepRight",(function(){return Sr})),n.d(t,"mergeDeepWith",(function(){return Tr})),n.d(t,"mergeDeepWithKey",(function(){return Ir})),n.d(t,"mergeLeft",(function(){return Ar})),n.d(t,"mergeRight",(function(){return kr})),n.d(t,"mergeWith",(function(){return qr})),n.d(t,"mergeWithKey",(function(){return xr})),n.d(t,"min",(function(){return Lr})),n.d(t,"minBy",(function(){return Mr})),n.d(t,"modulo",(function(){return Fr})),n.d(t,"move",(function(){return $r})),n.d(t,"multiply",(function(){return Vr})),n.d(t,"nAry",(function(){return be})),n.d(t,"negate",(function(){return zr})),n.d(t,"none",(function(){return Rr})),n.d(t,"not",(function(){return Me})),n.d(t,"nth",(function(){return G})),n.d(t,"nthArg",(function(){return Br})),n.d(t,"o",(function(){return Dr})),n.d(t,"objOf",(function(){return Gn})),n.d(t,"of",(function(){return Ur})),n.d(t,"omit",(function(){return Wr})),n.d(t,"once",(function(){return Gr})),n.d(t,"or",(function(){return rn})),n.d(t,"otherwise",(function(){return Kr})),n.d(t,"over",(function(){return Xr})),n.d(t,"pair",(function(){return Zr})),n.d(t,"partial",(function(){return ei})),n.d(t,"partialRight",(function(){return ti})),n.d(t,"partition",(function(){return ni})),n.d(t,"path",(function(){return K})),n.d(t,"paths",(function(){return J})),n.d(t,"pathEq",(function(){return ri})),n.d(t,"pathOr",(function(){return ii})),n.d(t,"pathSatisfies",(function(){return oi})),n.d(t,"pick",(function(){return ui})),n.d(t,"pickAll",(function(){return si})),n.d(t,"pickBy",(function(){return ai})),n.d(t,"pipe",(function(){return Be})),n.d(t,"pipeK",(function(){return ci})),n.d(t,"pipeP",(function(){return Ge})),n.d(t,"pipeWith",(function(){return Ze})),n.d(t,"pluck",(function(){return X})),n.d(t,"prepend",(function(){return li})),n.d(t,"product",(function(){return fi})),n.d(t,"project",(function(){return hi})),n.d(t,"prop",(function(){return Y})),n.d(t,"propEq",(function(){return pi})),n.d(t,"propIs",(function(){return mi})),n.d(t,"propOr",(function(){return vi})),n.d(t,"propSatisfies",(function(){return gi})),n.d(t,"props",(function(){return yi})),n.d(t,"range",(function(){return bi})),n.d(t,"reduce",(function(){return Z})),n.d(t,"reduceBy",(function(){return Pt})),n.d(t,"reduceRight",(function(){return _i})),n.d(t,"reduceWhile",(function(){return wi})),n.d(t,"reduced",(function(){return Ni})),n.d(t,"reject",(function(){return vt})),n.d(t,"remove",(function(){return Mt})),n.d(t,"repeat",(function(){return Oi})),n.d(t,"replace",(function(){return ji})),n.d(t,"reverse",(function(){return De})),n.d(t,"scan",(function(){return Pi})),n.d(t,"sequence",(function(){return xi})),n.d(t,"set",(function(){return Ii})),n.d(t,"slice",(function(){return ze})),n.d(t,"sort",(function(){return Ci})),n.d(t,"sortBy",(function(){return Si})),n.d(t,"sortWith",(function(){return Ti})),n.d(t,"split",(function(){return Ai})),n.d(t,"splitAt",(function(){return ki})),n.d(t,"splitEvery",(function(){return qi})),n.d(t,"splitWhen",(function(){return Li})),n.d(t,"startsWith",(function(){return Mi})),n.d(t,"subtract",(function(){return Fi})),n.d(t,"sum",(function(){return wr})),n.d(t,"symmetricDifference",(function(){return $i})),n.d(t,"symmetricDifferenceWith",(function(){return Vi})),n.d(t,"tail",(function(){return Re})),n.d(t,"take",(function(){return Dt})),n.d(t,"takeLast",(function(){return sn})),n.d(t,"takeLastWhile",(function(){return zi})),n.d(t,"takeWhile",(function(){return Bi})),n.d(t,"tap",(function(){return Hi})),n.d(t,"test",(function(){return Ui})),n.d(t,"andThen",(function(){return Wi})),n.d(t,"times",(function(){return Ei})),n.d(t,"toLower",(function(){return Gi})),n.d(t,"toPairs",(function(){return Ji})),n.d(t,"toPairsIn",(function(){return Ki})),n.d(t,"toString",(function(){return yt})),n.d(t,"toUpper",(function(){return Yi})),n.d(t,"transduce",(function(){return Xi})),n.d(t,"transpose",(function(){return Zi})),n.d(t,"traverse",(function(){return Qi})),n.d(t,"trim",(function(){return to})),n.d(t,"tryCatch",(function(){return no})),n.d(t,"type",(function(){return Ae})),n.d(t,"unapply",(function(){return ro})),n.d(t,"unary",(function(){return io})),n.d(t,"uncurryN",(function(){return oo})),n.d(t,"unfold",(function(){return uo})),n.d(t,"union",(function(){return so})),n.d(t,"unionWith",(function(){return co})),n.d(t,"uniq",(function(){return Dn})),n.d(t,"uniqBy",(function(){return Bn})),n.d(t,"uniqWith",(function(){return ao})),n.d(t,"unless",(function(){return lo})),n.d(t,"unnest",(function(){return fo})),n.d(t,"until",(function(){return ho})),n.d(t,"update",(function(){return Ft})),n.d(t,"useWith",(function(){return di})),n.d(t,"values",(function(){return fe})),n.d(t,"valuesIn",(function(){return po})),n.d(t,"view",(function(){return vo})),n.d(t,"when",(function(){return go})),n.d(t,"where",(function(){return yo})),n.d(t,"whereEq",(function(){return bo})),n.d(t,"without",(function(){return _o})),n.d(t,"xor",(function(){return wo})),n.d(t,"xprod",(function(){return No})),n.d(t,"zip",(function(){return Eo})),n.d(t,"zipObj",(function(){return Oo})),n.d(t,"zipWith",(function(){return jo})),n.d(t,"thunkify",(function(){return Po}));var r=function(){return!1},i=function(){return!0},o={"@@functional/placeholder":!0};function u(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function s(e){return function t(n){return 0===arguments.length||u(n)?t:e.apply(this,arguments)}}function a(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return u(n)?t:s((function(t){return e(n,t)}));default:return u(n)&&u(r)?t:u(n)?s((function(t){return e(t,r)})):u(r)?s((function(t){return e(n,t)})):e(n,r)}}}var c=a((function(e,t){return Number(e)+Number(t)}));function l(e,t){var n;t=t||[];var r=(e=e||[]).length,i=t.length,o=[];for(n=0;n<r;)o[o.length]=e[n],n+=1;for(n=0;n<i;)o[o.length]=t[n],n+=1;return o}function f(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,u){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,u,s){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,u,s,a){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,u,s,a,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,u,s,a,c,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function d(e,t,n){return function(){for(var r=[],i=0,o=e,s=0;s<t.length||i<arguments.length;){var a;s<t.length&&(!u(t[s])||i>=arguments.length)?a=t[s]:(a=arguments[i],i+=1),r[s]=a,u(a)||(o-=1),s+=1}return o<=0?n.apply(this,r):f(o,d(e,r,n))}}var h=a((function(e,t){return 1===e?s(t):f(e,d(e,[],t))})),p=s((function(e){return h(e.length,(function(){var t=0,n=arguments[0],r=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var e=n.apply(this,l(arguments,[t,r]));return t+=1,e},e.apply(this,i)}))}));function m(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return u(n)?t:a((function(t,r){return e(n,t,r)}));case 2:return u(n)&&u(r)?t:u(n)?a((function(t,n){return e(t,r,n)})):u(r)?a((function(t,r){return e(n,t,r)})):s((function(t){return e(n,r,t)}));default:return u(n)&&u(r)&&u(i)?t:u(n)&&u(r)?a((function(t,n){return e(t,n,i)})):u(n)&&u(i)?a((function(t,n){return e(t,r,n)})):u(r)&&u(i)?a((function(t,r){return e(n,t,r)})):u(n)?s((function(t){return e(t,r,i)})):u(r)?s((function(t){return e(n,t,i)})):u(i)?s((function(t){return e(n,r,t)})):e(n,r,i)}}}var v=m((function(e,t,n){if(e>=n.length||e<-n.length)return n;var r=(e<0?n.length:0)+e,i=l(n);return i[r]=t(n[r]),i})),g=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function y(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function b(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!g(i)){for(var o=0;o<e.length;){if("function"==typeof i[e[o]])return i[e[o]].apply(i,r);o+=1}if(y(i)){var u=t.apply(null,r);return u(i)}}return n.apply(this,arguments)}}function _(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}var w={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},N=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=_(this.xf["@@transducer/step"](e,!1))),e},e}(),E=a(b(["all"],a((function(e,t){return new N(e,t)})),(function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0}))),O=a((function(e,t){return t>e?t:e}));function j(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}function P(e){return"[object String]"===Object.prototype.toString.call(e)}var x=s((function(e){return!!g(e)||!!e&&("object"==typeof e&&(!P(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),I=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function C(e){return new I(e)}var S=a((function(e,t){return f(e.length,(function(){return e.apply(t,arguments)}))}));function T(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function A(e,t,n,r){return e["@@transducer/result"](n[r](S(e["@@transducer/step"],e),t))}var k="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function q(e,t,n){if("function"==typeof e&&(e=C(e)),x(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return A(e,t,n,"fantasy-land/reduce");if(null!=n[k])return T(e,t,n[k]());if("function"==typeof n.next)return T(e,t,n);if("function"==typeof n.reduce)return A(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var L=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),M=a((function(e,t){return new L(e,t)}));function F(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var $=Object.prototype.toString,V=function(){return"[object Arguments]"===$.call(arguments)?function(e){return"[object Arguments]"===$.call(e)}:function(e){return F("callee",e)}}(),z=!{toString:null}.propertyIsEnumerable("toString"),R=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(){return arguments.propertyIsEnumerable("length")}(),D=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},H="function"!=typeof Object.keys||B?s((function(e){if(Object(e)!==e)return[];var t,n,r=[],i=B&&V(e);for(t in e)!F(t,e)||i&&"length"===t||(r[r.length]=t);if(z)for(n=R.length-1;n>=0;)F(t=R[n],e)&&!D(r,t)&&(r[r.length]=t),n-=1;return r})):s((function(e){return Object(e)!==e?[]:Object.keys(e)})),U=a(b(["fantasy-land/map","map"],M,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return h(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return q((function(n,r){return n[r]=e(t[r]),n}),{},H(t));default:return j(e,t)}}))),W=Number.isInteger||function(e){return e<<0===e},G=a((function(e,t){var n=e<0?t.length+e:e;return P(t)?t.charAt(n):t[n]})),J=a((function(e,t){return e.map((function(e){for(var n,r=t,i=0;i<e.length;){if(null==r)return;n=e[i],r=W(n)?G(n,r):r[n],i+=1}return r}))})),K=a((function(e,t){return J([e],t)[0]})),Y=a((function(e,t){return K([e],t)})),X=a((function(e,t){return U(Y(e),t)})),Z=m(q),Q=s((function(e){return h(Z(O,0,X("length",e)),(function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0}))})),ee=s((function(e){return function(){return e}})),te=a((function(e,t){return e&&t})),ne=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=_(this.xf["@@transducer/step"](e,!0))),e},e}(),re=a(b(["any"],a((function(e,t){return new ne(e,t)})),(function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1}))),ie=s((function(e){return h(Z(O,0,X("length",e)),(function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1}))})),oe=a((function(e,t){return"function"==typeof t["fantasy-land/ap"]?t["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(n){return e(n)(t(n))}:q((function(e,n){return l(e,U(n,t))}),[],e)}));function ue(e,t){for(var n=0,r=t.length-(e-1),i=new Array(r>=0?r:0);n<r;)i[n]=Array.prototype.slice.call(t,n,n+e),n+=1;return i}var se=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return l(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}(),ae=a(b([],a((function(e,t){return new se(e,t)})),ue)),ce=a((function(e,t){return l(t,[e])})),le=a((function(e,t){return e.apply(this,t)})),fe=s((function(e){for(var t=H(e),n=t.length,r=[],i=0;i<n;)r[i]=e[t[i]],i+=1;return r}));function de(e,t){return H(t).reduce((function(n,r){return n[r]=e(t[r]),n}),{})}var he=s((function e(t){return t=de((function(t){return"function"==typeof t?t:e(t)}),t),h(Z(O,0,X("length",fe(t))),(function(){var e=arguments;return de((function(t){return le(t,e)}),t)}))})),pe=a((function(e,t){return t(e)})),me=m((function(e,t,n){var r=e(t),i=e(n);return r<i?-1:r>i?1:0})),ve=m((function(e,t,n){var r={};for(var i in n)r[i]=n[i];return r[e]=t,r})),ge=s((function(e){return null==e})),ye=m((function e(t,n,r){if(0===t.length)return n;var i=t[0];if(t.length>1){var o=!ge(r)&&F(i,r)?r[i]:W(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,o)}if(W(i)&&g(r)){var u=[].concat(r);return u[i]=n,u}return ve(i,n,r)})),be=a((function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,r){return t.call(this,e,n,r)};case 4:return function(e,n,r,i){return t.call(this,e,n,r,i)};case 5:return function(e,n,r,i,o){return t.call(this,e,n,r,i,o)};case 6:return function(e,n,r,i,o,u){return t.call(this,e,n,r,i,o,u)};case 7:return function(e,n,r,i,o,u,s){return t.call(this,e,n,r,i,o,u,s)};case 8:return function(e,n,r,i,o,u,s,a){return t.call(this,e,n,r,i,o,u,s,a)};case 9:return function(e,n,r,i,o,u,s,a,c){return t.call(this,e,n,r,i,o,u,s,a,c)};case 10:return function(e,n,r,i,o,u,s,a,c,l){return t.call(this,e,n,r,i,o,u,s,a,c,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),_e=s((function(e){return be(2,e)}));function we(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t}var Ne=a((function(e,t){var n=h(e,t);return h(e,(function(){return q(oe,U(n,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),Ee=s((function(e){return Ne(e.length,e)})),Oe=a((function(e,t){return we(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:Ee(te)(e,t)})),je=s((function(e){return h(e.length,e)})),Pe=je((function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))}));function xe(e){return function t(n){for(var r,i,o,u=[],s=0,a=n.length;s<a;){if(x(n[s]))for(o=0,i=(r=e?t(n[s]):n[s]).length;o<i;)u[u.length]=r[o],o+=1;else u[u.length]=n[s];s+=1}return u}}var Ie=function(e){var t=function(e){return{"@@transducer/init":w.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){var r=e["@@transducer/step"](t,n);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(e);return{"@@transducer/init":w.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){return x(n)?q(t,e,n):q(t,e,[n])}}},Ce=a(b(["fantasy-land/chain","chain"],a((function(e,t){return U(e,Ie(t))})),(function(e,t){return"function"==typeof t?function(n){return e(t(n))(n)}:xe(!1)(U(e,t))}))),Se=m((function(e,t,n){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>t?t:n}));function Te(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var Ae=s((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function ke(e,t,n,r){var i=function(i){for(var o=t.length,u=0;u<o;){if(e===t[u])return n[u];u+=1}for(var s in t[u+1]=e,n[u+1]=i,e)i[s]=r?ke(e[s],t,n,!0):e[s];return i};switch(Ae(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return Te(e);default:return e}}var qe=s((function(e){return null!=e&&"function"==typeof e.clone?e.clone():ke(e,[],[],!0)})),Le=s((function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}})),Me=s((function(e){return!e})),Fe=Ee(Me);function $e(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function Ve(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return g(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var ze=m(Ve("slice",(function(e,t,n){return Array.prototype.slice.call(n,e,t)}))),Re=s(Ve("tail",ze(1,1/0)));function Be(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return f(arguments[0].length,Z($e,arguments[0],Re(arguments)))}var De=s((function(e){return P(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()}));function He(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Be.apply(this,De(arguments))}function Ue(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return He(He.apply(this,U(Ce,e)),t)}function We(e,t){return function(){var n=this;return e.apply(n,arguments).then((function(e){return t.call(n,e)}))}}function Ge(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return f(arguments[0].length,Z(We,arguments[0],Re(arguments)))}function Je(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return Ge.apply(this,De(arguments))}var Ke=G(0);function Ye(e){return e}var Xe=s(Ye),Ze=a((function(e,t){if(t.length<=0)return Xe;var n=Ke(t),r=Re(t);return f(n.length,(function(){return q((function(t,n){return e.call(this,n,t)}),n.apply(this,arguments),r)}))})),Qe=a((function(e,t){return Ze.apply(this,[e,De(t)])}));function et(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function tt(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}var nt="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};function rt(e,t,n,r){var i=et(e);function o(e,t){return it(e,t,n.slice(),r.slice())}return!tt((function(e,t){return!tt(o,t,e)}),et(t),i)}function it(e,t,n,r){if(nt(e,t))return!0;var i=Ae(e);if(i!==Ae(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===function(e){var t=String(e).match(/^function (\w*)/);return null==t?"":t[1]}(e.constructor))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!nt(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!nt(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var o=n.length-1;o>=0;){if(n[o]===e)return r[o]===t;o-=1}switch(i){case"Map":return e.size===t.size&&rt(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&rt(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=H(e);if(u.length!==H(t).length)return!1;var s=n.concat([e]),a=r.concat([t]);for(o=u.length-1;o>=0;){var c=u[o];if(!F(c,t)||!it(t[c],e[c],s,a))return!1;o-=1}return!0}var ot=a((function(e,t){return it(e,t,[],[])}));function ut(e,t,n){var r,i;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;n<e.length;){if(0===(i=e[n])&&1/i===r)return n;n+=1}return-1}if(t!=t){for(;n<e.length;){if("number"==typeof(i=e[n])&&i!=i)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(null===t)return e.indexOf(t,n)}for(;n<e.length;){if(ot(e[n],t))return n;n+=1}return-1}function st(e,t){return ut(t,e,0)>=0}function at(e){return'"'+e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var ct=function(e){return(e<10?"0":"")+e},lt="function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+ct(e.getUTCMonth()+1)+"-"+ct(e.getUTCDate())+"T"+ct(e.getUTCHours())+":"+ct(e.getUTCMinutes())+":"+ct(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function ft(e){return function(){return!e.apply(this,arguments)}}function dt(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}function ht(e){return"[object Object]"===Object.prototype.toString.call(e)}var pt=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),mt=a(b(["filter"],a((function(e,t){return new pt(e,t)})),(function(e,t){return ht(t)?q((function(n,r){return e(t[r])&&(n[r]=t[r]),n}),{},H(t)):dt(e,t)}))),vt=a((function(e,t){return mt(ft(e),t)}));function gt(e,t){var n=function(n){var r=t.concat([e]);return st(n,r)?"<Circular>":gt(n,r)},r=function(e,t){return j((function(t){return at(t)+": "+n(e[t])}),t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+j(n,e).join(", ")+"))";case"[object Array]":return"["+j(n,e).concat(r(e,vt((function(e){return/^\d+$/.test(e)}),H(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):at(lt(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+n(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+n(e.valueOf())+")":at(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var i=e.toString();if("[object Object]"!==i)return i}return"{"+r(e,H(e)).join(", ")+"}"}}var yt=s((function(e){return gt(e,[])})),bt=a((function(e,t){if(g(e)){if(g(t))return e.concat(t);throw new TypeError(yt(t)+" is not an array")}if(P(e)){if(P(t))return e+t;throw new TypeError(yt(t)+" is not a string")}if(null!=e&&we(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(null!=e&&we(e.concat))return e.concat(t);throw new TypeError(yt(e)+' does not have a method named "concat" or "fantasy-land/concat"')})),_t=s((function(e){return f(Z(O,0,U((function(e){return e[0].length}),e)),(function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}}))})),wt=a((function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:je(be(e,(function(e,n,r,i,o,u,s,a,c,l){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,n);case 3:return new t(e,n,r);case 4:return new t(e,n,r,i);case 5:return new t(e,n,r,i,o);case 6:return new t(e,n,r,i,o,u);case 7:return new t(e,n,r,i,o,u,s);case 8:return new t(e,n,r,i,o,u,s,a);case 9:return new t(e,n,r,i,o,u,s,a,c);case 10:return new t(e,n,r,i,o,u,s,a,c,l)}})))})),Nt=s((function(e){return wt(e.length,e)})),Et=a(st),Ot=a((function(e,t){return h(Z(O,0,X("length",t)),(function(){var n=arguments,r=this;return e.apply(r,j((function(e){return e.apply(r,n)}),t))}))})),jt=function(){function e(e,t,n,r){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=r,this.inputs={}}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(F(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},e}(),Pt=d(4,[],b([],d(4,[],(function(e,t,n,r){return new jt(e,t,n,r)})),(function(e,t,n,r){return q((function(r,i){var o=n(i);return r[o]=e(F(o,r)?r[o]:ke(t,[],[],!1),i),r}),{},r)}))),xt=Pt((function(e,t){return e+1}),0),It=c(-1),Ct=a((function(e,t){return null==t||t!=t?e:t})),St=m((function(e,t,n){var r=e(t),i=e(n);return r>i?-1:r<i?1:0}));function Tt(e,t,n){var r,i=typeof e;switch(i){case"string":case"number":return 0===e&&1/e==-1/0?!!n._items["-0"]||(t&&(n._items["-0"]=!0),!1):null!==n._nativeSet?t?(r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r):n._nativeSet.has(e):i in n._items?e in n._items[i]||(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var o=e?1:0;return!!n._items[i][o]||(t&&(n._items[i][o]=!0),!1)}return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?t?(r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r):n._nativeSet.has(e):i in n._items?!!st(e,n._items[i])||(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return!!n._items[i]||(t&&(n._items[i]=!0),!1);case"object":if(null===e)return!!n._items.null||(t&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(e))in n._items?!!st(e,n._items[i])||(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var At=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!Tt(e,!0,this)},e.prototype.has=function(e){return Tt(e,!1,this)},e}(),kt=a((function(e,t){for(var n=[],r=0,i=e.length,o=t.length,u=new At,s=0;s<o;s+=1)u.add(t[s]);for(;r<i;)u.add(e[r])&&(n[n.length]=e[r]),r+=1;return n})),qt=m((function(e,t,n){for(var r=[],i=0,o=t.length;i<o;)tt(e,t[i],n)||tt(e,t[i],r)||r.push(t[i]),i+=1;return r})),Lt=a((function(e,t){var n={};for(var r in t)n[r]=t[r];return delete n[e],n})),Mt=m((function(e,t,n){var r=Array.prototype.slice.call(n,0);return r.splice(e,t),r})),Ft=m((function(e,t,n){return v(e,ee(t),n)})),$t=a((function e(t,n){switch(t.length){case 0:return n;case 1:return W(t[0])&&g(n)?Mt(t[0],1,n):Lt(t[0],n);default:var r=t[0],i=Array.prototype.slice.call(t,1);return null==n[r]?n:W(r)&&g(n)?Ft(r,e(i,n[r]),n):ve(r,e(i,n[r]),n)}})),Vt=a((function(e,t){return e/t})),zt=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},e}(),Rt=a(b(["drop"],a((function(e,t){return new zt(e,t)})),(function(e,t){return ze(Math.max(0,e),1/0,t)}))),Bt=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?_(n):n},e}(),Dt=a(b(["take"],a((function(e,t){return new Bt(e,t)})),(function(e,t){return ze(0,e<0?1/0:e,t)})));function Ht(e,t){return Dt(e<t.length?t.length-e:0,t)}var Ut=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}(),Wt=a(b([],a((function(e,t){return new Ut(e,t)})),Ht));function Gt(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return ze(0,n+1,t)}var Jt=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=q(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},e}(),Kt=a(b([],a((function(e,t){return new Jt(e,t)})),Gt)),Yt=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},e}(),Xt=a((function(e,t){return new Yt(e,t)})),Zt=G(-1),Qt=a(b([],Xt,(function(e,t){var n=[],r=1,i=t.length;if(0!==i)for(n[0]=t[0];r<i;)e(Zt(n),t[r])||(n[n.length]=t[r]),r+=1;return n}))),en=s(b([],Xt(ot),Qt(ot))),tn=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},e}(),nn=a(b(["dropWhile"],a((function(e,t){return new tn(e,t)})),(function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return ze(n,1/0,t)}))),rn=a((function(e,t){return e||t})),on=a((function(e,t){return we(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:Ee(rn)(e,t)})),un=s((function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():g(e)?[]:P(e)?"":ht(e)?{}:V(e)?function(){return arguments}():void 0})),sn=a((function(e,t){return Rt(e>=0?t.length-e:0,t)})),an=a((function(e,t){return ot(sn(e.length,t),e)})),cn=m((function(e,t,n){return ot(e(t),e(n))})),ln=m((function(e,t,n){return ot(t[e],n[e])})),fn=a((function e(t,n){var r,i,o,u=n instanceof Array?[]:{};for(i in n)o=typeof(r=t[i]),u[i]="function"===o?r(n[i]):r&&"object"===o?e(r,n[i]):n[i];return u})),dn=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=_(this.xf["@@transducer/step"](e,t))),e},e}(),hn=a(b(["find"],a((function(e,t){return new dn(e,t)})),(function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}}))),pn=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=_(this.xf["@@transducer/step"](e,this.idx))),e},e}(),mn=a(b([],a((function(e,t){return new pn(e,t)})),(function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return n;n+=1}return-1}))),vn=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},e}(),gn=a(b([],a((function(e,t){return new vn(e,t)})),(function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return t[n];n-=1}}))),yn=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},e}(),bn=a(b([],a((function(e,t){return new yn(e,t)})),(function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return n;n-=1}return-1}))),_n=s(xe(!0)),wn=s((function(e){return h(e.length,(function(t,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=t,e.apply(this,r)}))})),Nn=a(Ve("forEach",(function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t}))),En=a((function(e,t){for(var n=H(t),r=0;r<n.length;){var i=n[r];e(t[i],i,t),r+=1}return t})),On=s((function(e){for(var t={},n=0;n<e.length;)t[e[n][0]]=e[n][1],n+=1;return t})),jn=a(Ve("groupBy",Pt((function(e,t){return null==e&&(e=[]),e.push(t),e}),null))),Pn=a((function(e,t){for(var n=[],r=0,i=t.length;r<i;){for(var o=r+1;o<i&&e(t[o-1],t[o]);)o+=1;n.push(t.slice(r,o)),r=o}return n})),xn=a((function(e,t){return e>t})),In=a((function(e,t){return e>=t})),Cn=a((function(e,t){if(0===e.length||ge(t))return!1;for(var n=t,r=0;r<e.length;){if(ge(n)||!F(e[r],n))return!1;n=n[e[r]],r+=1}return!0})),Sn=a((function(e,t){return Cn([e],t)})),Tn=a((function(e,t){return e in t})),An=a(nt),kn=m((function(e,t,n){return h(Math.max(e.length,t.length,n.length),(function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)}))})),qn=c(1),Ln=a(st),Mn=Pt((function(e,t){return t}),null),Fn=a((function(e,t){return"function"!=typeof t.indexOf||g(t)?ut(t,e,0):t.indexOf(e)})),$n=ze(0,-1),Vn=m((function(e,t,n){return dt((function(t){return tt(e,t,n)}),t)})),zn=m((function(e,t,n){e=e<n.length&&e>=0?e:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(e,0,t),r})),Rn=m((function(e,t,n){return e=e<n.length&&e>=0?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),t,Array.prototype.slice.call(n,e))})),Bn=a((function(e,t){for(var n,r,i=new At,o=[],u=0;u<t.length;)n=e(r=t[u]),i.add(n)&&o.push(r),u+=1;return o})),Dn=Bn(Xe),Hn=a((function(e,t){var n,r;return e.length>t.length?(n=e,r=t):(n=t,r=e),Dn(dt(wn(st)(n),r))})),Un=a(Ve("intersperse",(function(e,t){for(var n=[],r=0,i=t.length;r<i;)r===i-1?n.push(t[r]):n.push(t[r],e),r+=1;return n})));var Wn="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var o in i)F(o,i)&&(t[o]=i[o]);n+=1}return t},Gn=a((function(e,t){var n={};return n[e]=t,n})),Jn={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":Ye},Kn={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":Ye},Yn={"@@transducer/init":Object,"@@transducer/step":function(e,t){return Wn(e,x(t)?Gn(t[0],t[1]):t)},"@@transducer/result":Ye};var Xn=m((function(e,t,n){return y(e)?q(t(e),e["@@transducer/init"](),n):q(t(function(e){if(y(e))return e;if(x(e))return Jn;if("string"==typeof e)return Kn;if("object"==typeof e)return Yn;throw new Error("Cannot create transformer for "+e)}(e)),ke(e,[],[],!1),n)})),Zn=s((function(e){for(var t=H(e),n=t.length,r=0,i={};r<n;){var o=t[r],u=e[o],s=F(u,i)?i[u]:i[u]=[];s[s.length]=o,r+=1}return i})),Qn=s((function(e){for(var t=H(e),n=t.length,r=0,i={};r<n;){var o=t[r];i[e[o]]=o,r+=1}return i})),er=a((function(e,t){return h(e+1,(function(){var n=arguments[e];if(null!=n&&we(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(yt(n)+' does not have a method named "'+t+'"')}))})),tr=a((function(e,t){return null!=t&&t.constructor===e||t instanceof e})),nr=s((function(e){return null!=e&&ot(e,un(e))})),rr=er(1,"join"),ir=s((function(e){return Ot((function(){return Array.prototype.slice.call(arguments,0)}),e)})),or=s((function(e){var t,n=[];for(t in e)n[n.length]=t;return n})),ur=a((function(e,t){if("function"!=typeof t.lastIndexOf||g(t)){for(var n=t.length-1;n>=0;){if(ot(t[n],e))return n;n-=1}return-1}return t.lastIndexOf(e)}));function sr(e){return"[object Number]"===Object.prototype.toString.call(e)}var ar=s((function(e){return null!=e&&sr(e.length)?e.length:NaN})),cr=a((function(e,t){return function(n){return function(r){return U((function(e){return t(e,r)}),n(e(r)))}}})),lr=s((function(e){return cr(G(e),Ft(e))})),fr=s((function(e){return cr(K(e),ye(e))})),dr=s((function(e){return cr(Y(e),ve(e))})),hr=a((function(e,t){return e<t})),pr=a((function(e,t){return e<=t})),mr=m((function(e,t,n){for(var r=0,i=n.length,o=[],u=[t];r<i;)u=e(u[0],n[r]),o[r]=u[1],r+=1;return[u[0],o]})),vr=m((function(e,t,n){for(var r=n.length-1,i=[],o=[t];r>=0;)o=e(o[0],n[r]),i[r]=o[1],r-=1;return[o[0],i]})),gr=a((function(e,t){return q((function(n,r){return n[r]=e(t[r],r,t),n}),{},H(t))})),yr=a((function(e,t){return t.match(e)||[]})),br=a((function(e,t){return W(e)?!W(t)||t<1?NaN:(e%t+t)%t:NaN})),_r=m((function(e,t,n){return e(n)>e(t)?n:t})),wr=Z(c,0),Nr=s((function(e){return wr(e)/e.length})),Er=s((function(e){var t=e.length;if(0===t)return NaN;var n=2-t%2,r=(t-n)/2;return Nr(Array.prototype.slice.call(e,0).sort((function(e,t){return e<t?-1:e>t?1:0})).slice(r,r+n))})),Or=a((function(e,t){var n={};return f(t.length,(function(){var r=e.apply(this,arguments);return F(r,n)||(n[r]=t.apply(this,arguments)),n[r]}))})),jr=a((function(e,t){return Wn({},e,t)})),Pr=s((function(e){return Wn.apply(null,[{}].concat(e))})),xr=m((function(e,t,n){var r,i={};for(r in t)F(r,t)&&(i[r]=F(r,n)?e(r,t[r],n[r]):t[r]);for(r in n)F(r,n)&&!F(r,i)&&(i[r]=n[r]);return i})),Ir=m((function e(t,n,r){return xr((function(n,r,i){return ht(r)&&ht(i)?e(t,r,i):t(n,r,i)}),n,r)})),Cr=a((function(e,t){return Ir((function(e,t,n){return t}),e,t)})),Sr=a((function(e,t){return Ir((function(e,t,n){return n}),e,t)})),Tr=m((function(e,t,n){return Ir((function(t,n,r){return e(n,r)}),t,n)})),Ar=a((function(e,t){return Wn({},t,e)})),kr=a((function(e,t){return Wn({},e,t)})),qr=m((function(e,t,n){return xr((function(t,n,r){return e(n,r)}),t,n)})),Lr=a((function(e,t){return t<e?t:e})),Mr=m((function(e,t,n){return e(n)<e(t)?n:t})),Fr=a((function(e,t){return e%t})),$r=m((function(e,t,n){var r=n.length,i=n.slice(),o=e<0?r+e:e,u=t<0?r+t:t,s=i.splice(o,1);return o<0||o>=n.length||u<0||u>=n.length?n:[].concat(i.slice(0,u)).concat(s).concat(i.slice(u,n.length))})),Vr=a((function(e,t){return e*t})),zr=s((function(e){return-e})),Rr=a((function(e,t){return E(ft(e),t)})),Br=s((function(e){return h(e<0?1:e+1,(function(){return G(e,arguments)}))})),Dr=m((function(e,t,n){return e(t(n))}));function Hr(e){return[e]}var Ur=s(Hr),Wr=a((function(e,t){for(var n={},r={},i=0,o=e.length;i<o;)r[e[i]]=1,i+=1;for(var u in t)r.hasOwnProperty(u)||(n[u]=t[u]);return n})),Gr=s((function(e){var t,n=!1;return f(e.length,(function(){return n?t:(n=!0,t=e.apply(this,arguments))}))}));function Jr(e,t){if(null==t||!we(t.then))throw new TypeError("`"+e+"` expected a Promise, received "+gt(t,[]))}var Kr=a((function(e,t){return Jr("otherwise",t),t.then(null,e)})),Yr=function(e){return{value:e,map:function(t){return Yr(t(e))}}},Xr=m((function(e,t,n){return e((function(e){return Yr(t(e))}))(n).value})),Zr=a((function(e,t){return[e,t]}));function Qr(e){return a((function(t,n){return f(Math.max(0,t.length-n.length),(function(){return t.apply(this,e(n,arguments))}))}))}var ei=Qr(l),ti=Qr(wn(l)),ni=ir([mt,vt]),ri=m((function(e,t,n){return ot(K(e,n),t)})),ii=m((function(e,t,n){return Ct(e,K(t,n))})),oi=m((function(e,t,n){return e(K(t,n))})),ui=a((function(e,t){for(var n={},r=0;r<e.length;)e[r]in t&&(n[e[r]]=t[e[r]]),r+=1;return n})),si=a((function(e,t){for(var n={},r=0,i=e.length;r<i;){var o=e[r];n[o]=t[o],r+=1}return n})),ai=a((function(e,t){var n={};for(var r in t)e(t[r],r,t)&&(n[r]=t[r]);return n}));function ci(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return Ue.apply(this,De(arguments))}var li=a((function(e,t){return l([e],t)})),fi=Z(Vr,1),di=a((function(e,t){return h(t.length,(function(){for(var n=[],r=0;r<t.length;)n.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))}))})),hi=di(j,[si,Xe]),pi=m((function(e,t,n){return ot(t,n[e])})),mi=m((function(e,t,n){return tr(e,n[t])})),vi=m((function(e,t,n){return ii(e,[t],n)})),gi=m((function(e,t,n){return e(n[t])})),yi=a((function(e,t){return e.map((function(e){return K([e],t)}))})),bi=a((function(e,t){if(!sr(e)||!sr(t))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=e;r<t;)n.push(r),r+=1;return n})),_i=m((function(e,t,n){for(var r=n.length-1;r>=0;)t=e(n[r],t),r-=1;return t})),wi=d(4,[],(function(e,t,n,r){return q((function(n,r){return e(n,r)?t(n,r):_(n)}),n,r)})),Ni=s(_),Ei=a((function(e,t){var n,r=Number(t),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=e(i),i+=1;return n})),Oi=a((function(e,t){return Ei(ee(e),t)})),ji=m((function(e,t,n){return n.replace(e,t)})),Pi=m((function(e,t,n){for(var r=0,i=n.length,o=[t];r<i;)t=e(t,n[r]),o[r+1]=t,r+=1;return o})),xi=a((function(e,t){return"function"==typeof t.sequence?t.sequence(e):_i((function(e,t){return oe(U(li,e),t)}),e([]),t)})),Ii=m((function(e,t,n){return Xr(e,ee(t),n)})),Ci=a((function(e,t){return Array.prototype.slice.call(t,0).sort(e)})),Si=a((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,n){var r=e(t),i=e(n);return r<i?-1:r>i?1:0}))})),Ti=a((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,n){for(var r=0,i=0;0===r&&i<e.length;)r=e[i](t,n),i+=1;return r}))})),Ai=er(1,"split"),ki=a((function(e,t){return[ze(0,e,t),ze(e,ar(t),t)]})),qi=a((function(e,t){if(e<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<t.length;)n.push(ze(r,r+=e,t));return n})),Li=a((function(e,t){for(var n=0,r=t.length,i=[];n<r&&!e(t[n]);)i.push(t[n]),n+=1;return[i,Array.prototype.slice.call(t,n)]})),Mi=a((function(e,t){return ot(Dt(e.length,t),e)})),Fi=a((function(e,t){return Number(e)-Number(t)})),$i=a((function(e,t){return bt(kt(e,t),kt(t,e))})),Vi=m((function(e,t,n){return bt(qt(e,t,n),qt(e,n,t))})),zi=a((function(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return ze(n+1,1/0,t)})),Ri=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):_(e)},e}(),Bi=a(b(["takeWhile"],a((function(e,t){return new Ri(e,t)})),(function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return ze(0,n,t)}))),Di=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=w.init,e.prototype["@@transducer/result"]=w.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},e}(),Hi=a(b([],a((function(e,t){return new Di(e,t)})),(function(e,t){return e(t),t})));var Ui=a((function(e,t){if(n=e,"[object RegExp]"!==Object.prototype.toString.call(n))throw new TypeError("test requires a value of type RegExp as its first argument; received "+yt(e));var n;return Te(e).test(t)})),Wi=a((function(e,t){return Jr("andThen",t),t.then(e)})),Gi=er(0,"toLowerCase"),Ji=s((function(e){var t=[];for(var n in e)F(n,e)&&(t[t.length]=[n,e[n]]);return t})),Ki=s((function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t})),Yi=er(0,"toUpperCase"),Xi=h(4,(function(e,t,n,r){return q(e("function"==typeof t?C(t):t),n,r)})),Zi=s((function(e){for(var t=0,n=[];t<e.length;){for(var r=e[t],i=0;i<r.length;)void 0===n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;t+=1}return n})),Qi=m((function(e,t,n){return"function"==typeof n["fantasy-land/traverse"]?n["fantasy-land/traverse"](t,e):xi(e,U(t,n))})),eo="\t\n\v\f\r \u2028\u2029\ufeff",to=s("function"==typeof String.prototype.trim&&!eo.trim()&&"".trim()?function(e){return e.trim()}:function(e){var t=new RegExp("^["+eo+"]["+eo+"]*"),n=new RegExp("["+eo+"]["+eo+"]*$");return e.replace(t,"").replace(n,"")}),no=a((function(e,t){return f(e.length,(function(){try{return e.apply(this,arguments)}catch(e){return t.apply(this,l([e],arguments))}}))})),ro=s((function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}})),io=s((function(e){return be(1,e)})),oo=a((function(e,t){return h(e,(function(){for(var n,r=1,i=t,o=0;r<=e&&"function"==typeof i;)n=r===e?arguments.length:o+i.length,i=i.apply(this,Array.prototype.slice.call(arguments,o,n)),r+=1,o=n;return i}))})),uo=a((function(e,t){for(var n=e(t),r=[];n&&n.length;)r[r.length]=n[0],n=e(n[1]);return r})),so=a(He(Dn,l)),ao=a((function(e,t){for(var n,r=0,i=t.length,o=[];r<i;)tt(e,n=t[r],o)||(o[o.length]=n),r+=1;return o})),co=m((function(e,t,n){return ao(e,l(t,n))})),lo=m((function(e,t,n){return e(n)?n:t(n)})),fo=Ce(Ye),ho=m((function(e,t,n){for(var r=n;!e(r);)r=t(r);return r})),po=s((function(e){var t,n=[];for(t in e)n[n.length]=e[t];return n})),mo=function(e){return{value:e,"fantasy-land/map":function(){return this}}},vo=a((function(e,t){return e(mo)(t).value})),go=m((function(e,t,n){return e(n)?t(n):n})),yo=a((function(e,t){for(var n in e)if(F(n,e)&&!e[n](t[n]))return!1;return!0})),bo=a((function(e,t){return yo(U(ot,e),t)})),_o=a((function(e,t){return vt(wn(st)(e),t)})),wo=a((function(e,t){return Boolean(!e^!t)})),No=a((function(e,t){for(var n,r=0,i=e.length,o=t.length,u=[];r<i;){for(n=0;n<o;)u[u.length]=[e[r],t[n]],n+=1;r+=1}return u})),Eo=a((function(e,t){for(var n=[],r=0,i=Math.min(e.length,t.length);r<i;)n[r]=[e[r],t[r]],r+=1;return n})),Oo=a((function(e,t){for(var n=0,r=Math.min(e.length,t.length),i={};n<r;)i[e[n]]=t[n],n+=1;return i})),jo=m((function(e,t,n){for(var r=[],i=0,o=Math.min(t.length,n.length);i<o;)r[i]=e(t[i],n[i]),i+=1;return r})),Po=s((function(e){return h(e.length,(function(){var t=arguments;return function(){return e.apply(this,t)}}))}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6),t),i(n(17),t),i(n(2),t),i(n(18),t),i(n(19),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortStringsAsc=t.objectEqualsByFirstObjectKeys=t.objectEqualsByIntersectionKeys=t.propIsNotNil=t.isNotObject=t.isNotNumber=t.isNotString=t.isObject=t.isNumber=t.isString=t.includesFlipped=t.isNotEmpty=t.isNotNil=void 0;const r=n(0);t.isNotNil=r.complement(r.isNil),t.isNotEmpty=r.complement(r.isEmpty),t.includesFlipped=r.curryN(2,r.flip(r.includes)),t.isString=r.is(String),t.isNumber=r.is(Number),t.isObject=r.is(Object),t.isNotString=r.complement(t.isString),t.isNotNumber=r.complement(t.isNumber),t.isNotObject=r.complement(t.isObject),t.propIsNotNil=r.pipe(r.prop,t.isNotNil),t.objectEqualsByIntersectionKeys=(e,t)=>{const n=r.pick(r.intersection(r.keys(e),r.keys(t)));return r.equals(n(e),n(t))},t.objectEqualsByFirstObjectKeys=(e,t)=>{const n=r.keys(e);return r.equals(r.pick(n,e),r.pick(n,t))};const i=r.invoker(1,"localeCompare");t.sortStringsAsc=r.sort(r.flip(i))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fastPotentialToCPT=t.cptToFastPotential=t.indexToCombination=t.combinationToIndex=void 0;const r=n(0);t.combinationToIndex=(e,t)=>{let n=0;for(let r=t.length-1;r>=0;r--)r<t.length&&(n*=t[r]),n+=e[r];return n},t.indexToCombination=(e,t)=>{const n=[];let r=e;return t.forEach(e=>{n.push(r%e),r=Math.floor(r/e)}),n},t.cptToFastPotential=(e,n,i)=>{if(Array.isArray(n)){const o=[e.levels.length,...e.parents.map(e=>i[e].levels.length)],u=r.product(o),s=Array(u);let a=0;n.forEach(n=>{const r=e.parents.map(e=>{const t=i[e],r=t.name,o=n.when[r];return t.levels.findIndex(e=>e===o)});e.levels.forEach((e,i)=>{const u=t.combinationToIndex([i,...r],o);s[u]=n.then[e],a+=n.then[e]})});return s.map(e=>e/a)}return e.levels.map(e=>n[e])},t.fastPotentialToCPT=(e,n,i)=>{const o=n[e];if(0===o.parents.length){const e={};return o.levels.forEach((t,n)=>{e[t]=i[n]}),e}{const e=o.parents.map(e=>n[e]),u=e.map(e=>e.levels.length),s=[];for(let n=0;n<r.product(u);n++){const r={when:{},then:{}};s.push(r);t.indexToCombination(n,u).forEach((t,n)=>{const i=e[n],{levels:o}=i,u=o[t];r.when[i.name]=u});let a=0;o.levels.forEach((e,t)=>{a+=i[n*o.levels.length+t]});const c=a>0?a:1;o.levels.forEach((e,t)=>{const u=i[n*o.levels.length+t];r.then[e]=u/c})}return s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateReferences=t.EvidenceFunction=t.NodePotential=t.mult=t.Product=t.marginalize=t.Marginal=t.reference=t.Reference=t.Unit=t.FormulaType=void 0;const r=n(0);var i;!function(e){e[e.MARGINAL=0]="MARGINAL",e[e.PRODUCT=1]="PRODUCT",e[e.NODE_POTENTIAL=2]="NODE_POTENTIAL",e[e.EVIDENCE_FUNCTION=3]="EVIDENCE_FUNCTION",e[e.UNIT=4]="UNIT",e[e.REFERENCE=5]="REFERENCE"}(i=t.FormulaType||(t.FormulaType={}));class o{constructor(){this.id=-1,this.kind=i.UNIT,this.refrerencedBy=[],this.domain=[],this.name="1",this.size=0,this.numberOfLevels=[]}}t.Unit=o;class u{constructor(e,t){this.kind=i.REFERENCE,this.refrerencedBy=[],this.id=e,this.domain=t[e].domain,this.formulaId=e,this.name=`ref(${e})`,this.numberOfLevels=t[e].numberOfLevels,this.size=t[e].size}}t.Reference=u,t.reference=(e,t)=>{const n=t[e];switch(n.kind){case i.REFERENCE:case i.UNIT:return n;default:return new u(e,t)}};class s{constructor(e,t){this.id=-1,this.kind=i.MARGINAL,this.refrerencedBy=[],this.separator=e,this.potential=t.id;const n=t.domain;this.domain=e.filter(e=>n.includes(e)),this.marginalized=n.filter(t=>!e.includes(t)),this.name=`({${this.marginalized.map(e=>e.toString()).join(",")}},${t.kind===i.REFERENCE?t.name:`ref(${t.id})`})`,this.numberOfLevels=this.domain.map(e=>t.numberOfLevels[t.domain.findIndex(t=>t===e)]),this.size=r.product(this.numberOfLevels)}}t.Marginal=s,t.marginalize=(e,t,n)=>{const r=t.domain,u=e.filter(e=>r.includes(e));if(0===u.length)return new o;if(u.length===r.length)return t;switch(t.kind){case i.MARGINAL:return new s(u,n[t.potential]);case i.UNIT:return t;default:return new s(u,t)}};class a{constructor(e){this.id=-1,this.kind=i.PRODUCT,this.refrerencedBy=[],this.factorIds=e.map(e=>e.id),this.name=`(${e.map(e=>e.kind===i.REFERENCE?e.name:`ref(${e.id})`).join(",")})`,this.domain=[...new Set(r.reduce((e,t)=>[...e,...t.domain],[],e))],this.numberOfLevels=this.domain.map(t=>{const n=e.find(e=>e.domain.includes(t));if(!n)throw new Error(`Domain of product ${this.name} contains nodes which are not in its factors`);const r=n;return r.numberOfLevels[r.domain.findIndex(e=>e===t)]}),this.size=r.product(this.numberOfLevels)}}t.Product=a,t.mult=e=>{const t=e.filter(e=>e.kind!==i.UNIT);return 0===t.length?new o:1===t.length?e[0]:new a(t)};t.NodePotential=class{constructor(e,t){this.kind=i.NODE_POTENTIAL,this.refrerencedBy=[],this.id=e.id,this.nodeId=e.id,this.domain=[e.id,...e.parents],this.name=`(${e.id})`,this.numberOfLevels=[e.levels.length,...t.map(e=>e.length)],this.size=r.product(this.numberOfLevels)}};t.EvidenceFunction=class{constructor(e){this.id=-1,this.kind=i.EVIDENCE_FUNCTION,this.refrerencedBy=[],this.nodeId=e.id,this.levels=null,this.domain=[e.id],this.name=`(${e.id})`,this.numberOfLevels=[e.levels.length],this.size=e.levels.length}},t.updateReferences=function(e){e.forEach(t=>{switch(t.kind){case i.EVIDENCE_FUNCTION:{const n=t;e[n.nodeId].refrerencedBy.push(n.id);break}case i.MARGINAL:{const n=t;e[n.potential].refrerencedBy.push(n.id);break}case i.PRODUCT:{const n=t;n.factorIds.forEach(t=>e[t].refrerencedBy.push(n.id));break}case i.REFERENCE:{const n=t;e[n.formulaId].refrerencedBy.push(n.id);break}case i.NODE_POTENTIAL:case i.UNIT:}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluate=t.evaluateMarginalPure=t.evaluateProductPure=void 0;const r=n(4),i=n(3),o=n(0);t.evaluateProductPure=(e,t,n,r,o,u)=>{if(0===e.length){return[]}const s=Array(u).fill(1),a=t.map(e=>e.map(e=>r.findIndex(t=>t===e)));let c=0;s.forEach((t,r)=>{const u=i.indexToCombination(r,o);e.forEach((e,t)=>{const o=a[t].map(e=>u[e]),c=i.combinationToIndex(o,n[t]);s[r]*=e[c]}),c+=s[r]});return c>0?s.map(e=>e/c):s};function u(e,t,n,r,o,u){const s=r.map(e=>t.findIndex(t=>e===t)),a=Array(u).fill(0);let c=0;e.forEach((e,t)=>{const r=i.indexToCombination(t,n),u=i.combinationToIndex(s.map(e=>r[e]),o);a[u]+=e,c+=e});return c>0?a.map(e=>e/c):a}t.evaluateMarginalPure=u;t.evaluate=(e,n,i,s)=>{const a=s[e];if(a)return a;{const a=i[e];switch(a.kind){case r.FormulaType.PRODUCT:return((e,n,r,i)=>{const u=e.factorIds.map(e=>r[e]),s=e.factorIds.map(e=>t.evaluate(e,n,r,i));if(0===s.length){const t=[];return i[e.id]=t,t}const a=u.map(e=>e.numberOfLevels),c=u.map(e=>e.domain),l=e.domain,f=l.map(e=>n[e].levels.length),d=t.evaluateProductPure(s,c,a,l,f,o.product(f));return i[e.id]=d,d})(a,n,i,s);case r.FormulaType.MARGINAL:return((e,n,r,i)=>{const o=t.evaluate(e.potential,n,r,i),s=r[e.potential],{domain:a,numberOfLevels:c}=s,{domain:l,size:f,numberOfLevels:d}=e,h=u(o,a,c,l,d,f);return i[e.id]=h,h})(a,n,i,s);case r.FormulaType.REFERENCE:{const e=a;return t.evaluate(e.formulaId,n,i,s)}case r.FormulaType.EVIDENCE_FUNCTION:return((e,t)=>{const n=Array(e.size).fill(1);let r=0;null==e.levels?(t[e.id]=n.fill(1),r=n.length):n.forEach((t,i)=>{var o;n[i]=(null===(o=e.levels)||void 0===o?void 0:o.includes(i))?1:0,r+=n[i]});const i=n.map(e=>e/r);return t[e.id]=i,i})(a,s);case r.FormulaType.UNIT:return[];case r.FormulaType.NODE_POTENTIAL:throw new Error(`The node potential function for node ${n[e].name} was not provided`)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeIdsWithoutParents=t.filterNodeWithParents=t.getNodesFromNetwork=t.hasNotNodeParents=t.getNodeParentsAndId=t.hasNodeParents=t.getNodeStates=t.getNodeId=t.getNodeParents=t.createNetwork=void 0;const r=n(0),i=n(8),o=n(2),u=(e,t)=>e.every(e=>-1!==t.indexOf(e));t.createNetwork=(...e)=>{const t=(e=>{const t=[...e].sort((e,t)=>e.parents.length-t.parents.length),n=[];return()=>{for(let e=0;e<t.length;e++){const r=t[e];if(0===r.parents.length||u(r.parents,n))return n.push(r.id),t.splice(e,1),r}}})(e);return e.reduce(e=>{const n=t();return r.isNil(n)?e:Object.assign({},i.addNode(e,n))},{})},t.getNodeParents=r.prop("parents"),t.getNodeId=r.prop("id"),t.getNodeStates=r.prop("states"),t.hasNodeParents=r.pipe(t.getNodeParents,o.isNotEmpty),t.getNodeParentsAndId=r.converge(r.append,[r.prop("id"),r.prop("parents")]),t.hasNotNodeParents=r.complement(t.hasNodeParents),t.getNodesFromNetwork=r.values,t.filterNodeWithParents=r.filter(t.hasNodeParents),t.getNodeIdsWithoutParents=r.pipe(t.getNodesFromNetwork,r.filter(t.hasNotNodeParents),r.map(t.getNodeId))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromCPT=t.Distribution=void 0;const r=n(3),i=n(0),o=n(5),u=n(13);class s{constructor(e,t,n){function r(n){throw new Error(`Cannot construct joint distribution for ${u.commaSep(e.map(e=>e.name))}${t.length>0?` conditioned on ${u.commaSep(t.map(e=>e.name))}.  `:".  "} ${n}`)}e.length<1&&r("you provided no head variables.");const o=[...new Set(e.map(e=>e.name))],s=[...new Set(t.map(e=>e.name))];if(o.length<e.length&&r("Head variables are not distinct."),s.length<t.length&&r("Parent variables are not distinct."),o.some(e=>s.includes(e))&&r("Head variables cannot also be parent variables."),e.some(e=>e.levels.length<1)&&r("You must provide a non-empty list of levels for each head variable"),t.some(e=>e.levels.length<1)&&r("You must provide a non-empty list of levels for each head variable"),this._variableNames=[],this._variableLevels=[],e.concat(t).forEach(e=>{this._variableNames.push(e.name),this._variableLevels.push(i.uniq(e.levels))}),this._numberOfHeadVariables=e.length,n){const e=i.product(this._variableLevels.map(e=>e.length));n.length!==e&&r(`Expecting the potential function to have ${e} elements but found ${n.length}`),this._potentialFunction=n}else{const e=i.product(this._variableLevels.map(e=>e.length));this._potentialFunction=Array(e).fill(1/e)}}hasHeadVariable(e){const t=this._variableNames.findIndex(t=>t===e);return t>=0&&t<this._numberOfHeadVariables}getHeadVariable(e){const t=this._variableNames.findIndex(t=>t===e);if(t<0)throw new Error("Cannot get head variable.   It is not a variable in the distribution.");if(t>=this._numberOfHeadVariables)throw new Error("Cannot get head variable.   It is a parent variable in the distribution.");return{name:e,levels:this._variableLevels[t]}}getHeadVariables(){const e=[];for(let t=0;t<this._numberOfHeadVariables;t++)e.push({name:this._variableNames[t],levels:this._variableLevels[t]});return e}hasParentVariable(e){return this._variableNames.findIndex(t=>t===e)>=this._numberOfHeadVariables}getParentVariable(e){const t=this._variableNames.findIndex(t=>t===e);if(t<0)throw new Error("Cannot get parent variable.   It is not a variable in the distribution.");if(t<this._numberOfHeadVariables)throw new Error("Cannot get parent variable.   It is a head variable in the distribution.");return{name:e,levels:this._variableLevels[t]}}getParentVariables(){if(this._numberOfHeadVariables===this._variableNames.length)return[];const e=[];for(let t=this._numberOfHeadVariables;t<this._variableLevels.length;t++)e.push({name:this._variableNames[t],levels:this._variableLevels[t]});return e}removeVariable(e){const t=this.hasHeadVariable(e),n=this.hasParentVariable(e);if(t&&1===this._numberOfHeadVariables)throw new Error(`Cannot remove variable ${e} from the distribution.   It is the only head variable.`);if(t||n){const n=this._variableLevels.map(e=>e.length),r=[...Array(this._variableLevels.length).keys()],u=this._variableNames.indexOf(e),s=r.filter((e,t)=>t!==u),a=n.filter((e,t)=>t!==u);this._numberOfHeadVariables-=t?1:0,this._variableLevels.splice(u,1),this._variableNames.splice(u,1),this._potentialFunction=o.evaluateMarginalPure(this._potentialFunction,r,n,s,a,i.product(a))}}removeLevel(e,t){const n=this._variableNames.indexOf(e),o=this._variableLevels.map(e=>e.length);if(n>0){const e=this._variableLevels[n].indexOf(t);if(e>0){const t=o.map((e,t)=>t===n?e-1:e),u=Array(i.product(t)).fill(0);let s=0;if(this._potentialFunction.forEach((i,a)=>{const c=r.indexToCombination(a,o);c[n]!==e&&(s+=i,c[n]>e&&(c[n]=c[n]-1),u[r.combinationToIndex(c,t)]=i)}),0===s)throw new Error("Cannot remove the specified level.  It would make the distribution inconsistent");this._potentialFunction=u.map(e=>e/s),this._variableLevels[n].splice(e,1)}}}renameVariable(e,t){const n=this._variableNames.indexOf(e),r=this._variableNames.indexOf(t);if(n<0)throw new Error(`Cannot rename variable ${e} to ${t}.  It does not exist`);if(r>=0)throw new Error(`Cannot rename variable ${e} to ${t}.  A variable with the new name already exists`);this._variableNames[n]=t}renameLevel(e,t,n){const r=this._variableNames.indexOf(e);if(r<0)throw new Error(`Cannot rename level ${t} to ${n} of variable ${e}.  The variable does not exist`);const i=this._variableLevels[r].indexOf(t),o=this._variableLevels[r].indexOf(n);if(i<0)throw new Error(`Cannot rename level ${t} to ${n} of variable ${e}.  The old level does not exist`);if(o>=0)throw new Error(`Cannot rename level ${t} to ${n} of variable ${e}.  The new level already exists`);this._variableLevels[r][i]=n}getPotentials(){return[...this._potentialFunction]}setPotentials(e){const t=this._variableLevels.map(e=>e.length);if(e.length!==i.product(t))throw new Error("Cannot set the potentials for the distribution.   The provided array has the wrong number of elements.");const n=i.product(t.slice(0,this._numberOfHeadVariables));let r=0;for(let t=0;t<e.length;t+=n){const o=i.sum(e.slice(t,t+n));if(0===o)throw new Error("Cannot set the potentials for the distribution.  The probabilities are undefined for some combinations of the parent varaibles");r+=o}this._potentialFunction=e.map(e=>e/r)}addHeadVariable(e,t){if(this._variableNames.indexOf(e)>0)throw new Error(`Cannot add variable ${e}.  A variable with that name already exists`);if(0===i.uniq(t).length)throw new Error(`Cannot add variable ${e}.  It has no levels`);const n=[...this._variableNames.slice(0,this._numberOfHeadVariables),e,...this._variableNames.slice(this._numberOfHeadVariables)],o=[...this._variableLevels.slice(0,this._numberOfHeadVariables),t,...this._variableLevels.slice(this._numberOfHeadVariables)],u=Array(i.product(o.map(e=>e.length))).fill(0),s=this._variableLevels.map(e=>e.length),a=o.map(e=>e.length);this._potentialFunction.forEach((e,n)=>{const i=r.indexToCombination(n,s);t.forEach((n,o)=>{const s=[...i.slice(0,this._numberOfHeadVariables),o,...i.slice(this._numberOfHeadVariables)];u[r.combinationToIndex(s,a)]=e/t.length})}),this._variableNames=n,this._variableLevels=o,this._numberOfHeadVariables+=1,this._potentialFunction=u}addParentVariable(e,t){if(this._variableNames.indexOf(e)>0)throw new Error(`Cannot add variable ${e}.  A variable with that name already exists`);if(0===i.uniq(t).length)throw new Error(`Cannot add variable ${e}.  It has no levels`);const n=[...this._variableNames,e],o=[...this._variableLevels,t],u=Array(i.product(o.map(e=>e.length))).fill(0),s=this._variableLevels.map(e=>e.length),a=o.map(e=>e.length);this._potentialFunction.forEach((e,n)=>{const i=r.indexToCombination(n,s);t.forEach((n,o)=>{const s=[...i,o];u[r.combinationToIndex(s,a)]=e/t.length})}),this._variableNames=n,this._variableLevels=o,this._potentialFunction=u}addLevel(e,t){const n=this._variableNames.indexOf(e);if(n<0)throw new Error(`Cannot add level ${t} to variable ${e}.  A variable with that name does not exist`);if(this._variableLevels[n].indexOf(t)>0)throw new Error(`Cannot add level ${t} to variable ${e}.  That level already exists`);const o=[...this._variableLevels];o[n]=[...this._variableLevels[n],t];const u=Array(i.product(o.map(e=>e.length))).fill(1e-9),s=this._variableLevels.map(e=>e.length),a=o.map(e=>e.length);this._potentialFunction.forEach((e,t)=>{const n=r.indexToCombination(t,s),i=r.combinationToIndex(n,a);u[i]=e});const c=i.sum(u);this._variableLevels=o,this._potentialFunction=u.map(e=>e/c)}infer(e,t){const n=Object.keys(e),o=Object.keys(t||{});if(n.some(e=>this._variableNames.indexOf(e)>=this._numberOfHeadVariables))throw new Error("Cannot infer probability.   The event contains evidence for one or more parent variables");if(o.some(e=>{const t=this._variableNames.indexOf(e);return t>=0&&t<this._numberOfHeadVariables}))throw new Error("Cannot infer probability.   The evidence contains events for one or more head variables");const u=i.uniq(n.filter(e=>this.hasHeadVariable(e))),s=i.uniq(o.filter(e=>this.hasParentVariable(e)));if(u.length<this._numberOfHeadVariables)throw new Error("Cannot infer probability.  The event must contain levels for each head variable.");if(s.length<this._variableNames.length-this._numberOfHeadVariables)throw new Error("Cannot infer probability.  You must provide evidence for each parent variable.");const a=this._variableNames.map((n,r)=>{const o=r<this._numberOfHeadVariables?e[n]:t?t[n]:[];return i.uniq(o).map(e=>this._variableLevels[r].indexOf(e)).filter(e=>e>=0)});if(a.slice(0,this._numberOfHeadVariables).some(e=>0===e.length))return 0;if(a.some(e=>0===e.length))throw new Error("Cannot infer probability.  The evidence for each parent must contain at least one valid level");const c=this._variableLevels.map(e=>e.length);let l=0,f=0;return this._potentialFunction.forEach((e,t)=>{const n=r.indexToCombination(t,c);n.every((e,t)=>a[t].includes(e))&&(l+=e),n.every((e,t)=>t<this._numberOfHeadVariables||a[t].includes(e))&&(f+=e)}),this._numberOfHeadVariables===this._variableNames.length?l:l/f}toJSON(){return{potentialFunction:this._potentialFunction,variableLevels:this._variableLevels,variableNames:this._variableNames,numberOfHeadVariables:this._numberOfHeadVariables}}describe(){const e=[...this._potentialFunction],t=this._variableLevels.map(e=>e.length);let n=[];const u=t.slice(this._numberOfHeadVariables);if(this._numberOfHeadVariables<this._variableNames.length){const r=[...Array(this._variableNames.length).keys()],s=r.slice(this._numberOfHeadVariables);n=o.evaluateMarginalPure(e,r,t,s,u,i.product(u))}const s=this._variableNames.map((e,t)=>[e,...this._variableLevels[t]].reduce((e,t)=>i.max(e,t.length),0)),a=this._variableNames.map((e,t)=>(t===this._numberOfHeadVariables?" | ":"")+e.padStart(s[t]," ")).join(" ")+" || Probability\n",c="".padStart(a.length,"-")+"\n";return a+e.map((e,i)=>{const o=r.indexToCombination(i,t),a=o.slice(0,this._numberOfHeadVariables),l=o.slice(this._numberOfHeadVariables),f=r.combinationToIndex(l,u),d=n.length>0?e/n[f]:e;return(a.every(e=>0===e)?c:"")+(o.map((e,t)=>(t===this._numberOfHeadVariables?" | ":"")+this._variableLevels[t][e].padStart(s[t]," ")).join(" ")+" || "+d.toExponential(4))}).join("\n")}}t.Distribution=s,t.fromCPT=function(e,t,n,o){const u=t=>{throw new Error(`Cannot create conditional distribution for variable ${e}.  ${t}`)};if(Array.isArray(o)){0===t.length&&u("It has no parent variables"),n[0]&&0!==n[0].length||u(e+" has no levels"),t.forEach((e,r)=>{const i=n[r+1];i&&0!==i.length||u(t[r]+" has no levels")});const a=t.map((e,t)=>({name:e,levels:n[t+1]})),[c,...l]=n,f=n.map(e=>e.length),d=i.product(f),h=Array(d).fill(0);let p=0;o.forEach((e,n)=>{const i=t.map((t,r)=>{e.when&&e.when[t]||u(`Row ${n} does not have an entry for parent variable ${t}.`);const i=e.when[t],o=l[r].indexOf(i);return o<0&&u(i+" is not a valid level."),o});c.forEach((t,o)=>{const s=r.combinationToIndex([o,...i],f);e.then&&null!=e.then[t]||u(`Row ${n} is missing an entry for the level ${t} of the head variable.`);const a=e.then[t];h[s]=a,p+=e.then[t]})});const m=h.map(e=>e/p);return new s([{name:e,levels:c}],a,m)}{(n.length<1||0===n[0].length)&&u("It has no levels");const[t]=n,r={name:e,levels:t},i=Array(t.length).fill(0);let a=0;return Object.entries(o).forEach(([e,n])=>{n<0&&u(`The probability for ${e} is less than zero.`),a+=n;t.indexOf(e)<0&&u(e+" is not a valid level"),i[t.indexOf(e)]+=n}),a<0&&u("At least one level must have a non-zero liklihood."),i.forEach((e,t)=>{i[t]=e/a}),new s([r],[],i)}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.infer=t.inferences=void 0;const o=n(15);t.inferences={enumeration:o.enumeration,junctionTree:o.junctionTree,variableElimination:o.variableElimination},i(n(34),t),t.infer=o.junctionTree.infer,i(n(40),t),i(n(64),t);var u=n(10);Object.defineProperty(t,"InferenceEngine",{enumerable:!0,get:function(){return u.LazyPropagationEngine}}),Object.defineProperty(t,"Distribution",{enumerable:!0,get:function(){return u.Distribution}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.infer=void 0;const r=n(10);t.infer=(e,t,n={})=>{const i={};Object.values(e).forEach(e=>{i[e.id]={levels:e.states,parents:e.parents,cpt:e.cpt}});const o=new r.LazyPropagationEngine(i),u={};Object.entries(n).forEach(([e,t])=>{u[e]=[t]}),o.setEvidence(u);const s={};return Object.entries(t).forEach(([e,t])=>{s[e]=[t]}),o.infer(s)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(22),t),i(n(31),t),i(n(32),t),i(n(3),t),i(n(4),t),i(n(7),t)},function(e,t,n){"use strict";function r(e,t,n){if("number"!=typeof t)throw new TypeError("Expected value to be a number");if(n===1/0)return t;if(!Number.isInteger(n))throw new TypeError("Expected precision to be an integer");const r="round"===e&&t<0;let i;r&&(t=Math.abs(t)),[t,i]=(t+"e").split("e");let o=Math[e](`${t}e${Number(i)+n}`);return[t,i]=(o+"e").split("e"),o=Number(`${t}e${Number(i)-n}`),r&&(o=-o),o}e.exports=r.bind(null,"round"),e.exports.up=r.bind(null,"ceil"),e.exports.down=r.bind(null,"floor")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.propagatePotentials=t.messageName=void 0;const r=n(0),i=n(4);t.messageName=(e,t)=>`(${e},${t})`;const o=(e,n,o,u,s,a)=>{const c=[],l=[];s.neighbors.forEach(e=>{if(e!==a.id){const o=n[t.messageName(e,s.id)],[u,a]=r.partition(e=>e.kind===i.FormulaType.EVIDENCE_FUNCTION,o);l.push(...u),c.push(...a)}});const f=s.evidence.map(e=>u[e]),d=r.uniqBy(e=>e.id,[...f,...l]),h=r.uniqBy(e=>e.id,[i.reference(s.prior,u),...c]),[p,m]=r.partition(t=>t.domain.every(t=>e.includes(t)),h),v=[...p,...d.filter(e=>p.some(t=>t.domain.includes(e.nodeId)))];if(m.length>0){let t;const n=d.filter(e=>m.some(t=>t.domain.includes(e.nodeId))),r=[...m,...n];if(1===r.length)t=o(i.marginalize(e,r[0],u));else{const n=o(i.mult(r));t=o(i.marginalize(e,n,u))}v.push(t)}n[t.messageName(s.id,a.id)]=v},u=(e,t,n,r,i,u)=>{const s=(u,a)=>{const c=e[u],{neighbors:l}=c;for(const e of l)null!=a&&e===a||s(e,u);if(null==a)return;const f=e[a],d=l.findIndex(e=>e===a),h=t[c.separators[d]];o(h,n,r,i,c,f)};return s(u),n},s=(e,t,n,r,i,u)=>{const s=(u,a)=>{const c=e[u];c.neighbors.forEach((l,f)=>{if(l!==a){const a=t[c.separators[f]],d=e[l];o(a,n,r,i,c,d),s(l,u)}})};return s(u),n};t.propagatePotentials=(e,t,n,r,i)=>{const o={};for(const a of i)u(e,t,o,n,r,a),s(e,t,o,n,r,a);return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializePriorNodePotentials=t.initializePosteriorNodePotentials=t.initializeSeparatorPotentials=t.initializePosteriorCliquePotentials=t.initializeCliques=t.initializeEvidence=t.initializeNodeParents=t.initializeNodes=t.upsertFormula=t.getNetworkInfo=t.showPotential=t.setDistribution=t.commaSep=void 0;const r=n(23),i=n(28),o=n(29),u=n(3),s=n(4),a=n(12),c=n(0),l=n(7),f=n(5);function d(e,t,n){const[r,...i]=e.getHeadVariables(),{name:o}=r,u=e=>{throw new Error(`Cannot set the distribution for ${o}.  `+e)};i.length>0&&u("It has more than one head variable.");const s=e.getParentVariables();t.find(e=>e.name===o)||u("The variable does not exist in the distribution");const a=t.find(e=>e.name===o),l=a.parents.map(e=>({name:t[e].name,levels:t[e].levels}));a.levels.forEach(t=>{r.levels.includes(t)||e.addLevel(o,t)}),r.levels.forEach(t=>{a.levels.includes(t)||e.removeLevel(o,t)}),s.forEach(t=>{const n=l.find(e=>e.name===t.name);n?(n.levels.forEach(n=>{t.levels.includes(n)||e.addLevel(t.name,n)}),t.levels.forEach(r=>{n.levels.includes(r)||e.removeLevel(t.name,r)})):e.removeVariable(t.name)}),l.forEach(t=>{s.find(e=>e.name===t.name)||e.addParentVariable(t.name,t.levels)});const d=e.toJSON().potentialFunction,h=[o,...l.map(e=>e.name)],p=[...Array(l.length+1).keys()];p.push(p.length);const m=[r.levels.length,...l.map(e=>e.levels.length)],v=[0,...s.map(e=>h.indexOf(e.name))],g=v.map(e=>m[e]),y=c.product(m);return n[a.id]=f.evaluateMarginalPure(d,v,g,p,m,y),a.id}t.commaSep=function(e){return 0===e.length?"":1===e.length?e[0]:2===e.length?e.join(" and "):e.slice(0,e.length-1).join(", ")+" and "+e[e.length-1]},t.setDistribution=d,t.showPotential=function(e,t){let n=e.name+"\n";const r=e.domain.map(e=>e.toString().padStart(4," ")).join("")+" |       \n";return n+=r,n+="".padStart(r.length,"-")+"\n",n+=t.map((t,n)=>`${u.indexToCombination(n,e.numberOfLevels).map(e=>e.toString().padStart(4," ")).join("")} | ${t.toExponential(4)}`).join("\n"),n},t.getNetworkInfo=e=>{const t={};Object.entries(e).forEach(([e,n])=>{t[e]={id:e,parents:n.parents,states:n.levels,cpt:[]}});const{cliques:n,sepSets:u,junctionTree:s}=r.default(t),a=i.createICliqueFactors(n,t),c=o.getConnectedComponents(s),l=c.length,f=2*(n.length-l),d=n.length,h=Object.keys(e).length,p=h+4*d+f,m=h,v=m+4*d,g={};Object.keys(e).forEach((e,t)=>{g[e]=t});const y={};Object.values(n).forEach((e,t)=>{y[e.id]=t});const b=c.map(e=>e.map(e=>y[e])),_=b.map(e=>e[0]),w={};c.forEach((e,t)=>{e.forEach(e=>{w[e.toString()]=t})});const N={},E=[],O={};return u.forEach(({ca:e,cb:t,sharedNodes:n})=>{const r=e,i=t;N[r.toString()]||(N[r.toString()]={}),N[i.toString()]||(N[i.toString()]={});const o=n.map(e=>g[e]),u=o.sort().toString();O[u]||(O[u]=E.length,E.push(o));const s=O[u];N[r.toString()][i.toString()]=s,N[i.toString()][r.toString()]=s}),{cliques:n,separators:E,junctionTree:s,connectedComponents:b,factorMap:a,cliqueMap:y,nodeMap:g,sepSetMap:N,ccMap:w,numberOfCliques:d,numberOfConnectedComponents:l,numberOfFormulas:p,numberOfNodes:h,numberOfMessages:f,cliqueOffset:m,messageOffset:v,roots:_}},t.upsertFormula=(e,t)=>n=>{switch(n.kind){case s.FormulaType.EVIDENCE_FUNCTION:case s.FormulaType.NODE_POTENTIAL:case s.FormulaType.PRODUCT:case s.FormulaType.UNIT:case s.FormulaType.MARGINAL:{const r=t[n.name];return null==r?(n.id=e.length,t[n.name]=n.id,e.push(n),n):e[r]}case s.FormulaType.REFERENCE:{const t=e[n.id];if(t)return t;throw new Error("Null reference to formula "+n.id)}}},t.initializeNodes=function(e,t,n,r){Object.entries(e).forEach(([i,o],u)=>{const a={id:u,name:i,parents:o.parents.map(e=>t[e]),children:[],referencedBy:[u],formula:u,posteriorMarginal:0,evidenceFunction:0,cliques:[],factorAssignedTo:0,levels:o.levels},c=o.parents.map(t=>e[t].levels);n(new s.NodePotential(a,c)),r[u]=a})},t.initializeNodeParents=function(e){e.forEach(t=>{const{id:n,parents:r}=t;r.forEach(t=>{e[t].children.push(n)})})},t.initializeEvidence=function(e,t){e.forEach(e=>{e.evidenceFunction=t(new s.EvidenceFunction(e)).id})},t.initializeCliques=function(e,t,n,r,i){const{cliques:o,junctionTree:u,cliqueMap:a,nodeMap:c,numberOfNodes:l,numberOfCliques:f,factorMap:d,ccMap:h,sepSetMap:p}=e;o.forEach((e,o)=>{const m=u.getNodeEdges(e.id),v=m.map(e=>a[e]),g=e.nodeIds.map(e=>c[e]).sort(),y=d[e.id].map(e=>c[e]),b=2*l+o,_=b+f,w={id:o,name:e.id,factors:y,domain:g,neighbors:v,prior:b,posterior:_,evidence:g.map(e=>e+l),messagesReceived:[],belongsTo:h[o.toString()],separators:m.map(t=>p[e.id][t])};if(r[o]=w,g.forEach(e=>{n[e].cliques.push(o)}),y.length>0)w.prior=t(s.mult(y.map(e=>s.reference(e,i)))).id;else{const e=new s.Unit;w.prior=t(e).id}})},t.initializePosteriorCliquePotentials=function(e,t,n,r,i){n.forEach(n=>{const o=n.neighbors.map(e=>r[a.messageName(e,n.id)]||[]);n.messagesReceived=o.map(e=>e.filter(e=>e.kind!==s.FormulaType.UNIT).map(e=>e.id)),n.posterior=e(s.mult([s.reference(n.prior,i),...c.reduce((e,t)=>(e.push(...t),e),[],o),...n.domain.map(e=>i[t[e].evidenceFunction])])).id})},t.initializeSeparatorPotentials=function(e,t,n,r){const{separators:i}=e;return i.map((e,i)=>{const o=n.filter(e=>e.separators.includes(i));if(o.length<2)throw new Error("Could not find a pair of cliques connected by separator "+e);const[u]=o,a=u.separators.findIndex(e=>e===i),c=r[u.posterior],l=n.find(e=>e.id===u.neighbors[a]),f=r[l.posterior],d=c.size<f.size?c:f;return t(s.marginalize(e,d,r)).id})},t.initializePosteriorNodePotentials=function(e,t,n,r,i){t.forEach(t=>{let o=r[n[t.cliques[0]].posterior];t.cliques.length>1&&i.forEach(e=>{const n=r[e];n.domain.includes(t.id)&&n.size<o.size&&(o=n)}),t.posteriorMarginal=e(s.marginalize([t.id],o,r)).id})},t.initializePriorNodePotentials=function(e,t,n){n.forEach(r=>{if(e[r.name].distribution)return void d(e[r.name].distribution,n,t);const i=r.parents.map(e=>n[e].name),o=[r.levels,...r.parents.map(e=>n[e].levels)];if(e[r.name].cpt){d(l.fromCPT(r.name,i,o,e[r.name].cpt),n,t)}else if(e[r.name].potentialFunction){const i=r.parents.map(e=>{const t=n.find(t=>t.id===e);return{name:t.name,levels:t.levels}});d(new l.Distribution([{name:r.name,levels:r.levels}],i,e[r.name].potentialFunction),n,t)}else{const e=[r.levels.length,...r.parents.map(e=>n[e].levels.length)];t[r.id]=Array(c.product(e)).fill(1/c.product(e))}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGraphBuilder=void 0;const r=n(0),i=n(1),o=r.pluck("id"),u=r.reduce((e,t)=>{const n=r.map(e=>[e,t.id],t.parents);return r.concat(e,n)},[]),s=(e=[])=>{let t=e;return{getValue:()=>t,setValue:e=>{t=e},add:e=>{t=r.append(e,t)},reject:e=>{t=r.reject(e,t)},any:e=>r.any(e,t)}},a=r.curry((e,t)=>r.any(r.equals(e),t)),c=r.curry((e,t,n)=>r.equals([e,t],n)||r.equals([t,e],n));t.createGraphBuilder=(e={})=>{const n=i.getNodesFromNetwork(e),l=s(o(n)),f=s(u(n)),d=(e,t)=>f.any(c(e,t));return{getNodes:()=>n,setNodeIds:e=>l.setValue(e),setEdges:e=>f.setValue(e),getNodesId:l.getValue,getEdges:f.getValue,addNodeId:e=>l.add(e),removeNodeId:e=>{f.reject(a(e)),l.reject(r.equals(e))},hasNodeId:e=>l.any(r.equals(e)),addEdge:(e,t)=>f.add([e,t]),removeEdge:(e,t)=>{f.reject(c(e,t))},hasEdge:d,hasNotEdge:r.complement(d),getNodeEdges:e=>r.reduce((t,[n,i])=>r.equals(e,n)?r.append(i,t):r.equals(e,i)?r.append(n,t):t,[],f.getValue()),clone:()=>{const n=t.createGraphBuilder(e);return n.setNodeIds(l.getValue()),n.setEdges(f.getValue()),n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.variableElimination=t.junctionTree=t.enumeration=void 0;const r=n(16);t.enumeration=r;const i=n(9);t.junctionTree=i;const o=n(33);t.variableElimination=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.infer=void 0;const r=n(1),i=n(0),o=new WeakMap,u=(e,t)=>{const n=Object.keys(t);return e.filter(e=>{for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i])return!1}return!0})};t.infer=(e,n,s)=>{let a=o.get(e);void 0===a&&(a=r.buildCombinations(e),o.set(e,a));let c=u(a,n),l=1;return s&&(c=u(c,s),l=t.infer(e,s)),((e,t)=>{const n=[];for(let r=0;r<t.length;r++){let o=1;const u=t[r],s=Object.keys(u);for(let t=0;t<s.length;t++){const n=s[t],r=e[n];if(0===r.parents.length){o*=r.cpt[u[n]]}else{const e=r.cpt,t={};for(let e=0;e<r.parents.length;e++){const n=r.parents[e];t[n]=u[n]}for(let r=0;r<e.length;r++){const s=e[r];if(i.equals(s.when,t)){o*=s.then[u[n]];break}}}}n.push(o)}let r=0;for(let e=0;e<n.length;e++)r+=n[e];return r})(e,c)/l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildCombinations=void 0;t.buildCombinations=(e,t)=>((e,t)=>{const n=[],r=(t,i={})=>{if(0===t.length)n.push(i);else{const[n,...o]=t,{states:u}=e[n];for(const e of u)r(o,Object.assign(Object.assign({},i),{[n]:e}))}};return r(t),n})(e,t||Object.keys(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeCliquePotentials=t.normalizeCliquePotential=t.filterCliquePotentialsByNodeCombinations=t.filterCliquesByNodeCombinations=t.getCliqueWithLessNodes=t.hasNodeIdAndParentsInClique=t.hasNodeIdsInClique=t.sumCliquePotentials=t.mapPotentialsThen=void 0;const r=n(0),i=n(2),o=n(6),u=r.prop("nodeIds"),s=r.ifElse(r.equals(0),r.always(1),r.identity),a=r.pipe(u,r.length);t.mapPotentialsThen=r.pluck("then"),t.sumCliquePotentials=r.pipe(t.mapPotentialsThen,r.sum,s),t.hasNodeIdsInClique=r.useWith(r.all,[r.pipe(r.prop("nodeIds"),i.includesFlipped),r.identity]),t.hasNodeIdAndParentsInClique=r.useWith(t.hasNodeIdsInClique,[r.identity,o.getNodeParentsAndId]),t.getCliqueWithLessNodes=e=>{const t=r.head(e);if(t)return r.reduce(r.minBy(a),t,r.tail(e));throw new Error("Cliques are empty")},t.filterCliquesByNodeCombinations=(e,t={})=>r.filter(r.pipe(r.prop("nodeIds"),r.intersection(r.keys(t)),i.isNotEmpty),e);const c=r.curry((e,t)=>{const{when:n}=t;return r.all(t=>{const r=n[t],i=e[t];return null==i||r===i},r.keys(n))});t.filterCliquePotentialsByNodeCombinations=(e,t)=>r.filter(c(t),e),t.normalizeCliquePotential=e=>{const n=t.sumCliquePotentials(e);return e.map(e=>(e.then=e.then/n,e))},t.normalizeCliquePotentials=e=>{for(const n of Object.keys(e))e[n]=t.normalizeCliquePotential(e[n]);return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSepSets=void 0;const r=n(0),i=n(2),o=n(20),u=r.addIndex(r.forEach),s=(e,t)=>t.sharedNodes.length-e.sharedNodes.length,a=(e,t,n)=>r.reduce((t,i)=>{const o=r.append(i,t);return((e,t)=>{const n={},i=(e,o)=>{n[e]=!0;const u=r.reduce((t,{ca:n,cb:i})=>r.equals(e,i)?r.append(n,t):r.equals(e,n)?r.append(i,t):t,[],t);return r.any(t=>{if(n[t]){if(t!==o)return!0}else if(i(t,e))return!0;return!1},u)};return r.any(({id:e})=>!n[e]&&i(e),e)})(e,o)?(n(i.ca,i.cb),t):o},[],(e=>{const t=r.clone(e);return o.sort(t,s),t})(t));t.createSepSets=(e,t)=>{const n=[];return u((t,o)=>{const u=r.drop(o+1,e);r.forEach(e=>{const r=((e,t)=>{const n=new Set(e.nodeIds),r=new Set(t.nodeIds);return Array(...new Set([...e.nodeIds,...t.nodeIds])).filter(e=>n.has(e)&&r.has(e))})(t,e);i.isNotEmpty(r)&&n.push({ca:t.id,cb:e.id,sharedNodes:r})},u)},e),a(e,n,t)}},function(e,t,n){e.exports=n(21)},function(e,t,n){var r,i,o;i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";e.__esModule=!0,e.sort=function(e,t,n,u){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");t?"function"!=typeof t&&(u=n,n=t,t=r):t=r,n||(n=0),u||(u=e.length);var s=u-n;if(!(s<2)){var c=0;if(s<32)return c=i(e,n,u,t),void o(e,n,u,n+c,t);var l=new a(e,t),f=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(s);do{if((c=i(e,n,u,t))<f){var d=s;d>f&&(d=f),o(e,n,n+d,n+c,t),c=d}l.pushRun(n,c),l.mergeRuns(),s-=c,n+=c}while(0!==s);l.forceMergeRuns()}};var t=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function n(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function r(e,r){if(e===r)return 0;if(~~e===e&&~~r===r){if(0===e||0===r)return e<r?-1:1;if(e<0||r<0){if(r>=0)return-1;if(e>=0)return 1;e=-e,r=-r}var i=n(e),o=n(r),u=0;return i<o?(e*=t[o-i-1],r/=10,u=-1):i>o&&(r*=t[i-o-1],e/=10,u=1),e===r?u:e<r?-1:1}var s=String(e),a=String(r);return s===a?0:s<a?-1:1}function i(e,t,n,r){var i=t+1;if(i===n)return 1;if(r(e[i++],e[t])<0){for(;i<n&&r(e[i],e[i-1])<0;)i++;!function(e,t,n){for(n--;t<n;){var r=e[t];e[t++]=e[n],e[n--]=r}}(e,t,i)}else for(;i<n&&r(e[i],e[i-1])>=0;)i++;return i-t}function o(e,t,n,r,i){for(r===t&&r++;r<n;r++){for(var o=e[r],u=t,s=r;u<s;){var a=u+s>>>1;i(o,e[a])<0?s=a:u=a+1}var c=r-u;switch(c){case 3:e[u+3]=e[u+2];case 2:e[u+2]=e[u+1];case 1:e[u+1]=e[u];break;default:for(;c>0;)e[u+c]=e[u+c-1],c--}e[u]=o}}function u(e,t,n,r,i,o){var u=0,s=0,a=1;if(o(e,t[n+i])>0){for(s=r-i;a<s&&o(e,t[n+i+a])>0;)u=a,(a=1+(a<<1))<=0&&(a=s);a>s&&(a=s),u+=i,a+=i}else{for(s=i+1;a<s&&o(e,t[n+i-a])<=0;)u=a,(a=1+(a<<1))<=0&&(a=s);a>s&&(a=s);var c=u;u=i-a,a=i-c}for(u++;u<a;){var l=u+(a-u>>>1);o(e,t[n+l])>0?u=l+1:a=l}return a}function s(e,t,n,r,i,o){var u=0,s=0,a=1;if(o(e,t[n+i])<0){for(s=i+1;a<s&&o(e,t[n+i-a])<0;)u=a,(a=1+(a<<1))<=0&&(a=s);a>s&&(a=s);var c=u;u=i-a,a=i-c}else{for(s=r-i;a<s&&o(e,t[n+i+a])>=0;)u=a,(a=1+(a<<1))<=0&&(a=s);a>s&&(a=s),u+=i,a+=i}for(u++;u<a;){var l=u+(a-u>>>1);o(e,t[n+l])<0?a=l:u=l+1}return a}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.array=null,this.compare=null,this.minGallop=7,this.length=0,this.tmpStorageLength=256,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=t,this.compare=n,this.length=t.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return e.prototype.pushRun=function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1},e.prototype.mergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}},e.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}},e.prototype.mergeAt=function(e){var t=this.compare,n=this.array,r=this.runStart[e],i=this.runLength[e],o=this.runStart[e+1],a=this.runLength[e+1];this.runLength[e]=i+a,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;var c=s(n[o],n,r,i,0,t);r+=c,0!=(i-=c)&&0!==(a=u(n[r+i-1],n,o,a,a-1,t))&&(i<=a?this.mergeLow(r,i,o,a):this.mergeHigh(r,i,o,a))},e.prototype.mergeLow=function(e,t,n,r){var i=this.compare,o=this.array,a=this.tmp,c=0;for(c=0;c<t;c++)a[c]=o[e+c];var l=0,f=n,d=e;if(o[d++]=o[f++],0!=--r)if(1!==t){for(var h=this.minGallop;;){var p=0,m=0,v=!1;do{if(i(o[f],a[l])<0){if(o[d++]=o[f++],m++,p=0,0==--r){v=!0;break}}else if(o[d++]=a[l++],p++,m=0,1==--t){v=!0;break}}while((p|m)<h);if(v)break;do{if(0!==(p=s(o[f],a,l,t,0,i))){for(c=0;c<p;c++)o[d+c]=a[l+c];if(d+=p,l+=p,(t-=p)<=1){v=!0;break}}if(o[d++]=o[f++],0==--r){v=!0;break}if(0!==(m=u(a[l],o,f,r,0,i))){for(c=0;c<m;c++)o[d+c]=o[f+c];if(d+=m,f+=m,0==(r-=m)){v=!0;break}}if(o[d++]=a[l++],1==--t){v=!0;break}h--}while(p>=7||m>=7);if(v)break;h<0&&(h=0),h+=2}if(this.minGallop=h,h<1&&(this.minGallop=1),1===t){for(c=0;c<r;c++)o[d+c]=o[f+c];o[d+r]=a[l]}else{if(0===t)throw new Error("mergeLow preconditions were not respected");for(c=0;c<t;c++)o[d+c]=a[l+c]}}else{for(c=0;c<r;c++)o[d+c]=o[f+c];o[d+r]=a[l]}else for(c=0;c<t;c++)o[d+c]=a[l+c]},e.prototype.mergeHigh=function(e,t,n,r){var i=this.compare,o=this.array,a=this.tmp,c=0;for(c=0;c<r;c++)a[c]=o[n+c];var l=e+t-1,f=r-1,d=n+r-1,h=0,p=0;if(o[d--]=o[l--],0!=--t)if(1!==r){for(var m=this.minGallop;;){var v=0,g=0,y=!1;do{if(i(a[f],o[l])<0){if(o[d--]=o[l--],v++,g=0,0==--t){y=!0;break}}else if(o[d--]=a[f--],g++,v=0,1==--r){y=!0;break}}while((v|g)<m);if(y)break;do{if(0!=(v=t-s(a[f],o,e,t,t-1,i))){for(t-=v,p=1+(d-=v),h=1+(l-=v),c=v-1;c>=0;c--)o[p+c]=o[h+c];if(0===t){y=!0;break}}if(o[d--]=a[f--],1==--r){y=!0;break}if(0!=(g=r-u(o[l],a,0,r,r-1,i))){for(r-=g,p=1+(d-=g),h=1+(f-=g),c=0;c<g;c++)o[p+c]=a[h+c];if(r<=1){y=!0;break}}if(o[d--]=o[l--],0==--t){y=!0;break}m--}while(v>=7||g>=7);if(y)break;m<0&&(m=0),m+=2}if(this.minGallop=m,m<1&&(this.minGallop=1),1===r){for(p=1+(d-=t),h=1+(l-=t),c=t-1;c>=0;c--)o[p+c]=o[h+c];o[d]=a[f]}else{if(0===r)throw new Error("mergeHigh preconditions were not respected");for(h=d-(r-1),c=0;c<r;c++)o[h+c]=a[c]}}else{for(p=1+(d-=t),h=1+(l-=t),c=t-1;c>=0;c--)o[p+c]=o[h+c];o[d]=a[f]}else for(h=d-(r-1),c=0;c<r;c++)o[h+c]=a[c]},e}()})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyPropagationEngine=void 0;const r=n(0),i=n(11),o=n(3),u=n(4),s=n(12),a=n(5),c=n(13),l=n(7),f=n(30);t.LazyPropagationEngine=class{constructor(e){this._separatorPotentials=[],this.clearCachedValues=e=>{const t=this._formulas[e];this._potentials[e]&&(this._potentials[e]=null,t.refrerencedBy.forEach(e=>this.clearCachedValues(e)))},this.hasVariable=e=>this._nodes.map(e=>e.name).includes(e),this.getVariables=()=>this._nodes.map(e=>e.name),this.getParents=e=>{const t=this._nodes.find(t=>t.name===e);return t?t.parents.map(e=>this._nodes[e].name):[]},this.hasParent=(e,t)=>this.getParents(e).includes(t),this.getLevels=e=>{const t=this._nodes.find(t=>t.name===e);return t?t.levels:[]},this.hasLevel=(e,t)=>this.getLevels(e).includes(t),this.getDistribution=e=>{var t;return this.getJointDistribution([e],(null===(t=this._nodes.find(t=>t.name===e))||void 0===t?void 0:t.parents.map(e=>this._nodes[e].name))||[])},this.getJointDistribution=(e,t)=>{const n=t.map(e=>this._nodes.findIndex(t=>t.name===e)),i=e.map(e=>this._nodes.findIndex(t=>t.name===e));this._formulas.forEach(e=>a.evaluate(e.id,this._nodes,this._formulas,this._potentials));const o=f.arbitraryJoin(this._nodes,this._cliques,this._separators,this._formulas,this._potentials,i,n),u=new l.Distribution(e.map(e=>this._nodes.find(t=>t.name===e)),t.map(e=>this._nodes.find(t=>t.name===e)),o);return n.concat(i).forEach(e=>{const t=this._nodes[e],n=this.getEvidence(t.name);n&&n.length>0&&r.difference(t.levels,n).forEach(e=>u.removeLevel(t.name,e))}),u},this.setDistribution=e=>{const t=c.setDistribution(e,this._nodes,this._potentials),n=this._potentials[t];return this.clearCachedValues(t),this._potentials[t]=n,!0},this.hasEvidenceFor=e=>{const t=this._nodes.find(t=>t.name===e);return!!t&&null!=this._formulas[t.evidenceFunction].levels},this.getEvidence=e=>{let t=null;const n=this._nodes.find(t=>t.name===e);if(n){const e=this._formulas[n.evidenceFunction].levels;null!==e&&(t=e.map(e=>n.levels[e]))}return t},this.updateEvidence=e=>{Object.keys(e).forEach(t=>{const n=this._nodes.find(e=>e.name===t);if(n){const i=this._formulas[n.evidenceFunction],o=r.uniq(e[t].map(e=>n.levels.indexOf(e)).filter(e=>e>=0)).sort();o.length>0&&i.levels!==o&&(i.levels=o,this.clearCachedValues(i.id))}})},this.setEvidence=e=>{this.removeAllEvidence(),this.updateEvidence(e)},this.removeEvidence=e=>{const t=this._nodes.find(t=>t.name===e);if(t){const e=this._formulas[t.evidenceFunction];null!=e.levels&&(e.levels=null,this.clearCachedValues(e.id))}},this.removeAllEvidence=()=>this._nodes.forEach(e=>{const t=this._formulas[e.evidenceFunction];null!=t.levels&&(t.levels=null,this.clearCachedValues(t.id))}),this.infer=e=>{const t=Object.keys(e);if(0===t.length)return 1;const n=t.map(e=>this._nodes.findIndex(t=>t.name===e));if(n.some(e=>-1===e))return 0;const i=t.map((t,i)=>{const o=e[t]||[],u=this._nodes[n[i]];return r.uniq(o.map(e=>u.levels.indexOf(e)).filter(e=>e>=0))});if(i.some(e=>0===e.length))return 0;if(1===n.length)return this.inferFromMarginal(n[0],i[0]);const o=this._cliques.filter(e=>n.every(t=>e.domain.includes(t))).sort((e,t)=>e.domain.length-t.domain.length);return o.length>0?this.inferFromClique(n,i,o[0].id):this.inferFromJointDistribution(n,e)},this.inferAll=e=>{const t={};return this._nodes.forEach(n=>{t[n.name]={},n.levels.forEach(r=>{const o={};o[n.name]=[r];const u=this.infer(o);e&&null!=e.precision&&e.precision>0?t[n.name][r]=i(u,e.precision):t[n.name][r]=u})}),t},this.toJSON=()=>r.clone({_class:"LazyCautiousInferenceEngine",_cliques:this._cliques,_nodes:this._nodes,_potentials:this._potentials,_formulas:this._formulas,_connectedComponents:this._connectedComponents,_separators:this._separators,_separatorPotentials:this._separatorPotentials});const t=c.getNetworkInfo(e),{connectedComponents:n,separators:o}=t,{nodeMap:d,cliqueMap:h}=t,{numberOfCliques:p,numberOfNodes:m}=t,v=[],g=Array(m),y=Array(p),b=n.map(e=>e.map(e=>h[e])),_=c.upsertFormula(v,{});c.initializeNodes(e,d,_,g),c.initializeNodeParents(g),c.initializeEvidence(g,_),c.initializeCliques(t,_,g,y,v);const w=s.propagatePotentials(y,o,_,v,t.roots);c.initializePosteriorCliquePotentials(_,g,y,w,v),this._separatorPotentials=c.initializeSeparatorPotentials(t,_,y,v),c.initializePosteriorNodePotentials(_,g,y,v,this._separatorPotentials);const N=new Array(v.length);c.initializePriorNodePotentials(e,N,g),u.updateReferences(v),this._nodes=g,this._cliques=y,this._formulas=v,this._potentials=N,this._connectedComponents=b,this._separators=o}inferFromMarginal(e,t){const n=a.evaluate(this._nodes[e].posteriorMarginal,this._nodes,this._formulas,this._potentials);return t.reduce((e,t)=>e+n[t],0)}inferFromJointDistribution(e,t){const n=Object.keys(t);console.warn(`The requested join (${n.join(", ")} are not in the same clique of the junction tree)`),console.warn("Use 'getJointDistribution' to efficiently make repeated inferences.");return this.getJointDistribution(n,[]).infer(t)}inferFromClique(e,t,n){const r=this._cliques[n].posterior,i=this._formulas[r],u=e.map(e=>i.domain.findIndex(t=>t===e)),s=a.evaluate(r,this._nodes,this._formulas,this._potentials);let c=0;return s.forEach((e,n)=>{const r=o.indexToCombination(n,i.numberOfLevels);u.every((e,n)=>t[n].includes(r[e]))&&(c+=e)}),c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(24),o=n(14),u=n(26),s=n(1),a=n(27),c=new WeakMap,l=r.pipe(u.createMoralGraph,a.createTriangulatedGraph,i.createCliqueGraph);t.default=e=>{const t=c.get(e);if(r.isNil(t)){const{graph:t,cliques:n}=l(o.createGraphBuilder(e)),r={cliques:n,sepSets:s.createSepSets(n,t.removeEdge),junctionTree:t};return c.set(e,r),r}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCliqueGraph=void 0;const r=n(0),i=n(25),o=n(14),u=r.addIndex(r.forEach);t.createCliqueGraph=e=>{const t=i.createCliques(e),n=o.createGraphBuilder();return u((e,i)=>{const o=r.drop(i+1,t);n.addNodeId(e.id),r.forEach(t=>{((e,t)=>r.any(e=>r.includes(e,t.nodeIds),e.nodeIds))(e,t)&&n.addEdge(e.id,t.id)},o)},t),{graph:n,cliques:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCliques=void 0;const r=n(0),i=(e,t)=>{const n=(e=>(t,n)=>r.reduce((n,i)=>{const o=r.intersection(e.getNodeEdges(i),t);return o.length>n.length?o:n},[],r.union(t,n)))(e),i=(o,u,s)=>{r.isEmpty(u)&&r.isEmpty(s)&&t(o);const a=n(u,s);for(const t of r.difference(u,a)){const n=e.getNodeEdges(t);i(r.append(t,o),r.intersection(u,n),r.intersection(s,n));const a=u.indexOf(t);u.splice(a,1),s.push(t)}};return i};t.createCliques=e=>{let t=0;const n=[];return i(e,e=>{n.push({id:""+t++,nodeIds:e})})([],e.getNodesId(),[]),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMoralGraph=void 0;const r=n(0),i=n(1),o=r.addIndex(r.forEach);t.createMoralGraph=e=>{const t=e.clone();return r.forEach(e=>{o((n,i)=>{const o=r.drop(i+1,e.parents);r.forEach(e=>{t.hasNotEdge(n,e)&&t.addEdge(n,e)},o)},e.parents)},i.filterNodeWithParents(t.getNodes())),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTriangulatedGraph=void 0;const r=n(0),i=n(1),o=r.addIndex(r.forEach),u=e=>({[Symbol.iterator]:()=>{const t=e.getNodesId(),n=new Set,o=r.filter(e=>!n.has(e));return{next:()=>{const u=o(t);if(i.isNotEmpty(u)){const t=((e,t)=>{const n=r.head(t),i=r.minBy(t=>e.getNodeEdges(t).length);if(n)return r.reduce(i,n,r.tail(t));throw new Error("There are not node ids available.")})(e,u);return n.add(t),{done:!1,value:t}}return{done:!0,value:""}}}}}),s=e=>e.getNodes().filter(t=>(t=>{const n=e.getNodeEdges(t.id);let i=!0;for(let t=0;t<n.length-1&&i;t++){const o=n[t];i=r.drop(t+1,n).every(t=>e.hasEdge(o,t)||e.hasEdge(t,o))}return i})(t)).map(e=>e.id);t.createTriangulatedGraph=e=>{const t=e.clone(),n=t.clone();s(n).forEach(e=>n.removeNodeId(e));const i=(a=n,Array.from(u(a)));var a;return r.forEach(e=>{const i=n.getNodeEdges(e);o((e,o)=>{const u=r.drop(o+1,i);r.forEach(r=>{n.hasNodeId(e)&&n.hasNodeId(r)&&n.hasNotEdge(e,r)&&(n.addEdge(e,r),t.addEdge(e,r))},u)},i),n.removeNodeId(e)},i),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createICliqueFactors=void 0;const r=n(0),i=n(1);t.createICliqueFactors=(e,t)=>{const n=new Set;return r.reduce((e,o)=>r.assoc(o.id,((e,t,n)=>i.getNodesFromNetwork(e).reduce((e,o)=>i.hasNodeIdAndParentsInClique(t,o)&&!n.has(o.id)?(n.add(o.id),r.append(o.id,e)):e,[]))(t,o,n),e),{},e.sort((e,t)=>e.nodeIds.length-t.nodeIds.length))};const o=(e,t)=>{const n=t.cpt,i=((e,t)=>r.reduce((e,n)=>r.assoc(n,t[n],e),{},e.parents))(t,e),o=r.find(r.pipe(r.prop("when"),r.equals(i)),n);if(o)return o.then[e[t.id]];throw new Error("Not found combination in node")},u=r.curry((e,t)=>i.hasNodeParents(t)?o(e,t):((e,t)=>t.cpt[e[t.id]])(e,t)),s=(e,t,n,o)=>i.objectEqualsByIntersectionKeys(n,e)?((e,t,n)=>{const i=r.map(t=>e[t],n),o=r.map(u(t),i);return r.reduce(r.multiply,1,o)})(t,e,o):0,a=r.curry((e,t,n,r,i)=>({when:i,then:s(i,t,n,r[e.id])})),c=(e,t,n,o)=>{const u=i.buildCombinations(t,e.nodeIds);return r.map(a(e,t,n,o),u)};t.default=(e,n,r)=>{const i=t.createICliqueFactors(e,n),o={};for(const t of e){const e=c(t,n,r,i);o[t.id]=e}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectedComponents=void 0;const r=n(0);t.getConnectedComponents=e=>{const t=e.getNodesId(),n=new Set,i=[],o=t=>{const i=e.getNodeEdges(t).filter(e=>!n.has(e));return n.add(t),r.reduce((e,t)=>(e.push(...o(t)),e),[t],i)};for(const e of t)n.has(e)||i.push(o(e));return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arbitraryJoin=void 0;const r=n(0),i=n(5);t.arbitraryJoin=function(e,t,n,o,u,s,a){const c=r.uniq(s),l=r.uniq(a),f=e=>{throw new Error("Cannot compute the join over the given head and parent variables.  "+e)};0===s.length&&f("No head variables were provided."),s.length<c.length&&f("The head variables are not distinct."),a.length<l.length&&f("The parent variables are not distinct."),c.some(e=>l.includes(e))&&f("The head and parent variables are not disjoint"),c.some(t=>t<0||t>=e.length)&&f("Some of the head variables do not exist in the network."),l.some(t=>t<0||t>=e.length)&&f("Some of the parent variables do not exist in the network.");const d=s.concat(a),h=d.map(t=>e[t].levels.length),p=function(e,t){const n=e.map((e,t)=>({id:t,domain:[...e.domain],neighbors:[...e.neighbors]})),r=n.filter(e=>e&&1===e.neighbors.length);for(;r.length>0;){const e=r.pop(),i=n[e.neighbors[0]],o=e.domain.filter(e=>t.includes(e));(0===o.length||i&&o.every(e=>i.domain.includes(e)))&&(n[e.id]=null,i.neighbors=i.neighbors.filter(t=>t!==e.id),1===i.neighbors.length&&r.push(i))}const i=n.filter(e=>null!=e).map(e=>null==e?void 0:e.id),o=[];return i.forEach(t=>{const n=e[t];n.neighbors.forEach((e,t)=>{i.includes(e)&&o.push(n.separators[t])})}),{cliques:i,separators:o}}(t,d);p.cliques.forEach(n=>i.evaluate(t[n].posterior,e,o,u)),p.cliques.length<1&&f("The minimum spanning tree did not have any nodes");const m=p.cliques,[v,...g]=m.map(e=>t[e]);let y=o[v.posterior].domain,b=o[v.posterior].domain.map(t=>e[t].levels.length),_=u[v.posterior],w=g;const N=p.separators.reduce((e,t)=>r.union(e,n[t]),[]).filter(e=>!d.includes(e)),E=t=>t.map(t=>e[t].levels.length);do{if(0===w.length)break;const e=w.reduce((e,t)=>r.union(e,t.domain.filter(e=>N.includes(e))),[]),t=d.concat(e),n=y.filter(t=>e.includes(t)),s=0===n.length?w:w.filter(e=>e.domain.includes(n[0]));w=0===n.length?[]:w.filter(e=>!e.domain.includes(n[0]));const a=y.filter(e=>t.includes(e)),c=E(a);_=i.evaluateMarginalPure(_,y,b,a,c,r.product(c)),y=a,b=c,s.forEach(e=>{const n=r.intersection(e.domain,y);if(n.length===e.domain.length)return;const s=o[e.posterior].domain.filter(e=>t.includes(e)),a=E(s),c=i.evaluateMarginalPure(u[e.posterior],o[e.posterior].domain,E(o[e.posterior].domain),s,a,r.product(a)),l=E(n),f=i.evaluateMarginalPure(c,s,a,n,l,r.product(l)),d=r.union(y,s),h=E(d);_=i.evaluateProductPure([_,c,f.map(e=>1/e)],[y,s,n],[b,a,l],d,h,r.product(h)),y=d,b=h})}while(w.length>0);return i.evaluateMarginalPure(_,y,b,d,h,r.product(h))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";function r(e,t){const n=[];for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++){const o=Object.assign(Object.assign({},e[r].states),t[i].states),u=Object.keys(o);if(!n.some(e=>u.every(t=>e.states[t]===o[t]))){const e={states:o,value:0};n.push(e)}}const r=Object.keys(e[0].states),i=Object.keys(t[0].states);for(let o=0;o<n.length;o++){const u=n[o],s=e.find(e=>r.every(t=>e.states[t]===u.states[t])),a=t.find(e=>i.every(t=>e.states[t]===u.states[t]));if(void 0===s||void 0===a)throw new Error("Fatal error");u.value=s.value*a.value}return n}function i(e,t){const n=[];for(let r=0;r<e.length;r++){const i=Object.assign({},e[r].states);delete i[t];const o=Object.keys(i),u=n.find(e=>o.every(t=>e.states[t]===i[t]));void 0===u?n.push({states:i,value:e[r].value}):u.value+=e[r].value}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.infer=void 0,t.infer=(e,t={},n)=>{const o=Object.keys(e),u=Object.keys(t),s=n?Object.keys(n):[],a=o.filter(e=>!u.some(t=>t===e)&&!s.some(t=>t===e)),c=o.map(t=>function(e,t){const n=[];if(0===e.parents.length){const t=e.cpt;for(let r=0;r<e.states.length;r++){const i=e.states[r];n.push({states:{[e.id]:i},value:t[i]})}}else{const t=e.cpt;for(let r=0;r<t.length;r++)for(let i=0;i<e.states.length;i++){const o=e.states[i];n.push({states:Object.assign(Object.assign({},t[r].when),{[e.id]:o}),value:t[r].then[o]})}}if(t){const e=Object.keys(t);for(let r=n.length-1;r>=0;r--)for(let i=0;i<e.length;i++){const o=e[i];if(n[r].states[o]&&n[r].states[o]!==t[o]){n.splice(r,1);break}}}return n}(e[t],n));for(;a.length>0;){const e=a.shift(),t=c.filter(t=>Object.keys(t[0].states).some(t=>t===e)),n=i(t.reduce((e,t)=>r(e,t)),e);for(let e=0;e<t.length;e++)c.splice(c.indexOf(t[e]),1);c.push(n)}const l=function(e){const t=e.reduce((e,t)=>e+t.value,0);return 0===t?e:e.map(e=>({states:Object.assign({},e.states),value:e.value/t}))}(c.filter(e=>Object.keys(e[0].states).length>0).sort((e,t)=>e.length-t.length).reduce((e,t)=>r(e,t))).find(e=>u.every(n=>e.states[n]===t[n]));return void 0===l?0:l.value}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNode=void 0;const r=n(0),i=n(35);t.addNode=(e,t)=>(((e,t)=>{if(r.has(e.id,t))throw new Error(`[Node "${e.id}"]: This node is already added to the network.`)})(t,e),i.default(t,e),r.assoc(t.id,t,e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),i=n(37),o=n(38),u=n(39);t.default=(e,t)=>{i.default(e),u.default(e),o.default(e,t),r.default(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(0),o=i.pluck("when"),u=(e,t,n)=>{i.forEach(t=>{if(i.isNil(n[t]))throw new Error(`[Node "${e}"]: Missing probability for "${t}" state.\n\nNode cpt: ${i.toString(n)}`);if(r.isNotNumber(n[t]))throw new Error(`[Node "${e}"]: All probabilities must be a number.\n\nNode cpt type for "${t}": ${i.type(n[t])}\nNode cpt for "${t}": ${i.toString(n[t])}\nNode cpt: ${i.toString(n)}`)},t)},s=(e,t)=>{const n=r.buildCombinations(t,e.parents),u=o(e.cpt);((e,t,n)=>{i.forEach(r=>{if(i.none(i.equals(r),t))throw new Error(`[Node "${e}"]: The node cpt has one missing combination.\n\nMissing node cpt combination (when): ${i.toString(r)}\nNode cpt combinations (when's): ${i.toString(t)}\nCombinations needed: ${i.toString(n)}`)},n)})(e.id,u,n),((e,t,n)=>{i.forEach(r=>{i.none(i.equals(r),n)&&console.warn(`[Node "${e}"]: The node cpt has one extra/invalid combination.\n\nInvalid node cpt combination (when): ${i.toString(r)}\nNode cpt combinations (when's): ${i.toString(t)}\nCombinations needed: ${i.toString(n)}`)},t)})(e.id,u,n)};t.default=(e,t)=>{if(i.isNil(e.cpt))throw new Error(`[Node "${e.id}"]: The node cpt is required and must be an object or an array.\n\nNode: ${i.toString(e)}`);if(r.isNotObject(e.cpt))throw new Error(`[Node "${e.id}"]: The node cpt must be an object or an array.\n\nNode cpt type: ${i.type(e.cpt)}\nNode cpt: ${i.toString(e.cpt)}`);Array.isArray(e.cpt)?(s(e,t),i.forEach(t=>{u(e.id,e.states,t.then)},e.cpt)):u(e.id,e.states,e.cpt)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(1);t.default=e=>{if(r.isNil(e.id))throw new Error("The node id is required and must be a string.\n\nNode: "+r.toString(e));if(i.isNotString(e.id))throw new Error(`The node id must be a string.\n\nNode id type: ${r.type(e.id)}\nNode id: ${r.toString(e.id)}\nNode: ${r.toString(e)}`)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(1);t.default=(e,t)=>{if(r.isNil(e.parents))throw new Error(`[Node "${e.id}"]: The node parents is required and must be an array of strings.\n\nNode: ${r.toString(e)}`);if(!Array.isArray(e.parents))throw new Error(`[Node "${e.id}"]: The node parents must be an array of strings.\n\nNode parents type: ${r.type(e.parents)}\nNode parents: ${r.toString(e.parents)}`);(({id:e,parents:t},n)=>{r.forEach(o=>{if(i.isNotString(o))throw new Error(`[Node "${e}"]: All node parents must be strings.\n\nNode parent type: ${r.type(o)}\nNode parent: ${r.toString(o)}\nNode parents: ${r.toString(t)}`);if(!r.has(o,n))throw new Error(`[Node "${e}"]: The node parent "${o}" was not found in the network.`)},t)})(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(1);t.default=e=>{if(r.isNil(e.states))throw new Error(`[Node "${e.id}"]: The node states is required and must be an array of strings.\n\nNode: ${r.toString(e)}`);if(!Array.isArray(e.states))throw new Error(`[Node "${e.id}"]: The node states must be an array of strings.\n\nNode states type: ${r.type(e.states)}\nNode states: ${r.toString(e.states)}`);if(r.isEmpty(e.states))throw new Error(`[Node "${e.id}"]: The node states must contain at least one string.\n\nNode states: ${r.toString(e.states)}`);e.states.forEach(t=>{if(i.isNotString(t))throw new Error(`[Node "${e.id}"]: All node states must be strings.\n\nNode state type: ${r.type(t)}\nNode state: ${r.toString(t)}\nNode states: ${r.toString(e.states)}`)})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(41),t),i(n(42),t),i(n(43),t),i(n(44),t),i(n(45),t),i(n(46),t),i(n(47),t),i(n(48),t),i(n(49),t),i(n(50),t),i(n(51),t),i(n(52),t),i(n(53),t),i(n(54),t),i(n(55),t),i(n(56),t),i(n(57),t),i(n(58),t),i(n(59),t),i(n(60),t),i(n(61),t),i(n(62),t),i(n(63),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inferAll=void 0;const r=n(11),i=n(0),o=n(6),u=n(9),s=n(2),a={precision:8},c=i.mergeRight(a),l=(e,t,n,c)=>i.reduce((o,l)=>i.assoc(l,((e,t,n,o,c)=>{if(s.propIsNotNil(t,o))return i.propEq(t,n,o)?1:0;const l=c.precision?c.precision:(null==a?void 0:a.precision)||8;return r(u.infer(e,{[t]:n},o),l)})(e,t.id,l,n,c),o),{},o.getNodeStates(t));t.inferAll=(e,t={},n={})=>{const r=c(n),u=e,s=t;return i.reduce((e,t)=>i.assoc(t.id,l(u,t,s,r),e),{},o.getNodesFromNetwork(e))}}])}));